# Changelog

- Added a map admin toggle to enable Mithril daggers as a run item during map creation/updates.
- Show tied map leaderboard times with shared ranks (e.g., #1 #1 #3).
- Rank map leaderboards by displayed time precision to avoid hidden millisecond tie breaks.
- Added a Player Settings music label to show the currently playing track.
- Added a Player Settings music button to restart the default Zelda OST.
- Added a Player Settings button to switch music to the Celeste OST.
- Preserve the Player Settings music label per player when reopening the page.
- Sync the run HUD music line with the player's selected track.
- Disabled player damage from all sources (global god mode).
- Widen the admin player action buttons so labels are fully visible.
- Added default/no-music buttons in Player Settings that reset to the Hytale music mix.
- Added a dedicated Player Settings music page with all music controls.
- Set the "No Music" button to return players to the Zelda OST.
- Updated music button targets to use AmbFX_Void for silence and Mus_Forgotten_Temple for default music.
- Added average playtime to the playtime admin page.
- Added an Aura OST button to the music settings page.
- Enlarged the music settings page and button widths to prevent label cropping.
- Removed the developer item note from the music page label.
- Renamed the Aura music button label to drop the OST suffix.
- Added per-player toggles for checkpoint and victory SFX on the music page.
- Added a /pk admin Players page with search, pagination, and per-player map stats detail view.
- Added admin player actions for teleporting and killing from the player stats page with confirmation prompts.
- Added admin player fly toggles to grant or revoke flight without changing game mode.
- Added an admin player inventory reset button to restore the base menu items.
- Added per-player progress clearing actions, including per-map selection in the admin player page.
- Expand /dbmigrate to import global messages, player counts, and missing settings/progress fields from JSON.
- Make /dbmigrate read JSON only (including Maps.json) without falling back to in-memory data.
- Abort /dbmigrate when any required JSON file is missing.
- Remove the unused title system and related database references.
- Add database schema documentation for current tables.
- Add a Clear button to the population history admin page to wipe samples.
- Update population history sampling interval to 10 minutes.
- Add /dbclear to wipe all parkour data from the database.
- Align persistence and settings documentation with the current MySQL-backed implementation.
- Add a smoke test checklist doc for quick manual verification after changes.
- Migrate parkour persistence to MySQL with in-memory caching and HikariCP pooling.
- Restore checkpoint sound playback when players touch checkpoints.
- Make restart-to-checkpoint reset the run when no checkpoints have been reached.
- Fix mithril sword map toggle not applying when starting a run from map selection or start triggers.
- Extend the player progress admin UI height to fit the added content.
- Show map difficulty alongside map names in selection and leaderboard pages when non-zero.
- Sort map lists by difficulty (non-zero first) and then by name on /pk and /pk leaderboard map pages.
- Added rank-prefixed player nameplates above players.
- Guard run HUD hide/show against missing packet handlers to avoid crashes.
- Replace clearing the custom HUD with a blank HUD overlay to avoid client crashes on hide.
- Added Hide HUD/Show HUD buttons in player settings to toggle the run HUD.
- Broadcast a global VexaGod announcement when a player reaches the final completion rank.
- Styled the VexaGod announcement with rainbow rank text and bolded GG callout.
- Split the VexaGod announcement into a main line plus a separate GG prompt.
- Added a bold GG prompt after world record completion broadcasts.
- Render the next-rank XP suffix in white on the stats rank line.
- Added stats rank display to include XP needed for the next completion rank.
- Guard run tracking until PlayerReady to avoid teleport mismatches during login.
- Teleport players back to spawn or map start when they hit the configured void cutoff Y.
- Added the Discord link to the run HUD info panel.
- Matched the Discord HUD line color to the server label.
- Removed the README ignore note from AGENTS instructions.
- Ignore fall respawn timing while climbing or grounded to prevent ladder descents from triggering respawns.
- Broadcast a global chat message when a player finishes a map.
- Colorize map categories in completion broadcasts for Easy/Medium/Hard/Insane.
- Updated the run HUD server address to play.hyvexa.com.
- Added a run-start hotbar item to restart to the last checkpoint once one is reached.
- Swapped the run hotbar order so restart-to-checkpoint sits before leave.
- Added per-map order field in /pkadmin for admin-controlled list ordering.
- Sort map select and leaderboard map lists by the admin order field.
- Order categories in /pk and /pk leaderboard by the lowest map order in each category.
- Added /pkadminitem to give the Media_RemoteControl admin item.
- Swapped parkour menu/run items to custom ingredient/seasonal item ids while keeping interactions.
- Overrode item names/interactions for the new menu/run items so right-click actions work.
- Restored full item definitions for the new menu/run items so they render correctly.
- Set parkour menu/run item rarity to Developer.
- Stop awarding XP for repeat completions of the same map.
- Hide the XP earned message when no XP is awarded.
- Show a one-time welcome UI per player explaining the parkour hotbar items.
- Updated the welcome UI hint to point to /pkitem.
- Adjusted the welcome UI size to better fit its content.
- Added an intro sentence to the welcome UI copy.
- Updated the welcome UI intro to a general Hyvexa jump server greeting.
- Added a "During a map:" label in the welcome UI list.
- Show [Admin] in red for OP chat messages instead of rank.
- Harden chat formatting against null sender names or content.
- Removed temporary/test UI assets and example recipe files.
- Removed unused example UI and test block assets.
- Removed the parkour sound test command.
- Renamed Hyzone branding, packages, and plugin entrypoint to Hyvexa across code, configs, UI, and docs.
- Give parkour menu items on player ready so joiners spawn with the base items without /pkitem.
- Skip replacing inventories with parkour items for OP players.
- Block non-OP players from breaking blocks.
- Hardened progress/map parsing, map ID validation, and coordinate/XP bounds for launch safety.
- Removed the run HUD overlay dim so the game view stays at full brightness.
- Ensure OP players still receive reset/leave items on map start while clearing only their hotbar.
- Ensure OP players get the base menu items on map leave while clearing only their hotbar.
- Return players to spawn and end the run if they fall longer than the configured timeout.
- Updated the HUD server address to include port 5500.
- Added a settings-driven category order for the /pk category list.
- Added chat formatting to display rank before player names.
- Colored chat rank tags and removed angle brackets.
- Reworked rank display to use completion percent across Easy/Medium/Hard/Insane map totals.
- Show rank thresholds and total possible XP in /pkadmin settings.
- Added a stamina stat override that continuously refills stamina for all players.
- Removed automatic spawn teleports on player join.
- Colored rank thresholds in /pkadmin settings.
- Colored the HUD rank label to match the player’s rank.
- Updated completion ranks to start at Bronze and add Master at 100%.
- Apply fall-to-spawn only when not in a run; falling during a run respawns at checkpoints again.
- Removed the idle fall-to-spawn chat message.
- Switched teleport-to-spawn to use the world spawn provider instead of fixed coords.
- Skip idle fall-to-spawn for OP players while keeping run fall behavior.
- Added a /pkadmin settings toggle for idle fall respawn on OP players.
- Reset the run timer when a player falls before reaching the first checkpoint.
- Added /cp checkpoint command (set, teleport, clear) stored in memory only.
- Added positional /cp set and /cp clear support alongside --action flags.
- Allow extra arguments so positional /cp set/clear parse without errors.
- Added /parkourui command with a simple example custom UI page.
- Added JSON-backed course/race storage plus setup commands for parkour data.
- Allow parkour course/race commands to accept subcommands without argument count errors.
- Added admin UI pages to manage courses and races via in-game menus.
- Removed race management in favor of course-only flow aligned with server design.
- Added player-facing course selection UI with teleport to start.
- Renamed player/admin commands to /pk and /pkadmin.
- Added course deletion button in the admin UI.
- Added active course tracking to announce checkpoint and finish touches.
- Added dead-zone respawn: if player falls below Y=300, teleport to last checkpoint or start.
- Added course completion handling with spawn teleport and persisted best times.
- Added course categories and category-first /pk flow with back navigation.
- Added category editing for selected courses in /pkadmin.
- Added /pk leaderboard to show completion counts per player.
- Added leaderboard UI for /pk leaderboard.
- Added leaderboard navigation for global and per-course best times.
- Added a right-click menu item (and /pkitem command) to open /pk via interaction.
- Added leaderboard item and updated /pkitem to give both items.
- Prevented dropping parkour admin items by filtering drop actions in inventory.
- Disabled dropping items globally via inventory drop filters.
- Cancelled DropItemEvent player requests to block all item drops.
- Allowed OP players to drop items while blocking others.
- Clear inventory on course start/leave/finish and swap in reset/leave or menu/leaderboard items.
- Added a non-blocking custom HUD timer that shows run time/status.
- Hide the run HUD by default and show it only during active runs.
- Sync parkour run/menu inventory on player connect based on active course state.
- Teleport players to spawn on connect when no active run is active.
- Added basic player progression with XP, levels, achievements, and title unlocks on completion.
- Added `/pk stats` to show level, XP, achievements, and titles.
- Added a `/pkadmin` page to view/reset player progression by UUID.
- Updated the progress admin page to list tracked players instead of manual UUID entry.
- Store and display last known player names in the progress admin list and summary.
- Applied code review cleanup: lock safety, shared UI button data, constants/utils, settings config, and validation/name fallbacks.
- Restructured the plugin into the Hyvexa package layout with renamed parkour modules and shared utilities.
- Added legacy progress admin shims to prevent missing-class errors after the package move.
- Added legacy parkour admin shims to avoid world-thread crashes when older classes are still cached.
- Restricted /pkadmin to OP players only.
- Replaced dead-zone respawns with a fall timer and added a /pkadmin setting for fall respawn seconds.
- Added a persistent "Hello world" HUD element on the run HUD.
- Reworked the run HUD to show player info, XP, date, and server IP on the right side.
- Added course completion count to the run HUD info panel.
- Applied color styling for EXP/Maps values, date, and server IP on the run HUD.
- Replaced the HUD player line with a centered PARKOUR title.
- Added test UI pages and commands for TestPage, Tutorial3Page, and InfoPanel.
- Renamed parkour courses to maps across data, commands, and UI.
- Added per-map first-completion XP rewards editable in /pkadmin.
- Show first-completion XP rewards in the /pk map selection list for uncompleted maps.
- Added a /pksound test command to play a sound event by id.
- Added /pksound list to show loaded sound event ids.
- Play the parkour victory sound when a player finishes a map.
- Added a test ambience override to play custom music in Zone1 daytime.
- Added global music fallback overrides for custom server music.
- Added /pkmusic debug to list loaded ambience music assets and tracks.
- Updated /pk map selection to show first-completion XP exactly as configured per map.
- Moved first-completion XP text onto the map name line in /pk selection entries.
- Removed the extra reward line from /pk map select entries to avoid blank spacing.
- Removed the unused map reward selector write to prevent UI selector errors.
- Reduced /pk map select entry height to remove extra blank space under status text.
- Reworked progression to show rank tiers (Bronze→Grandmaster) with editable XP thresholds and rank-based displays.
- Removed base completion XP so rewards only apply on first completion using map-configured values.
- Added a /pk stats UI page to show player progression details in a custom UI.
- Removed achievements and active title tracking from parkour progression displays.
- Added a My Stats stick item that opens /pk stats.
- Added Close buttons for UI pages without back navigation.
- Removed titles display from the /pk stats UI.
- Fixed Close buttons for /pk and /pk leaderboard root pages.
- Restored the persistent run HUD on reconnect by reattaching the custom HUD each time.
- Fixed run HUD info not updating by avoiding readiness timer resets each tick.
- Recreate the run HUD on player connect to keep it visible after reconnects.
- Added per-map start/leave trigger blocks to auto-join or leave runs with /pkadmin controls.
- Added a leave teleport coord to /pkadmin that triggers when touching the leave block.
- Wired the leave stick to use the map leave teleport when configured.
- Reworked /pkadmin map buttons into two columns with shorter labels to free list space.
- Forced parkour menu/run items into hotbar slots 0-2 to bypass pickup preference.
- Moved the run timer to the top-center of the screen while running.
- Wrapped the run HUD root so the timer label can sit at top-center without UI load errors.
- Fixed run HUD timer alignment property to avoid UI load failures.
- Adjusted run timer size and position for top-center display.
- Updated run timer text to show the map name with elapsed time.
- Replaced the HUD date line with a static music label.
- Auto-close the first-join welcome UI after a short delay to avoid blocking chat.
- Restored rank-prefixed chat formatting without the admin override.
- Added rank-prefixed join/leave server messages.
- Suppressed the default join broadcast so only the custom join message appears.
- Added a /pkadmin global announcement field that displays a soft top-center HUD message for 10 seconds.
- Ensured the announcement sender also sees the broadcast banner.
- Calculated My Stats XP from completed map totals instead of stored EXP values.
- Moved the announcement banner lower and styled it as a larger boxed HUD element.
- Removed the announcement frame box and increased announcement text size.
- Require touching all checkpoints before completing a map and warn when missing.
- Added a short cooldown between missing-checkpoint warnings at the finish line.
- Broadcast admin announcements to chat in red as "ADMIN MESSAGE: <message>".
- Removed an invalid leave-message event hook that prevented builds.
- Include leaderboard position in completion broadcast messages.
- Highlight leaderboard position and add WR wording for new first-place runs.
- Color the /pk stats rank label and show XP progress against total possible XP.
- Added playtime tracking and a /pkadmin Playtime page listing total playtime per player.
- Fixed playtime entry UI styling to avoid CustomUI load errors.
- Removed UUIDs from the playtime list display.
- Added periodic playtime snapshots to ensure playtime shows even after short sessions.
- Removed the custom leave broadcast while keeping the custom join message.
- Changed the admin chat tag color to pink.
- Reworked the stats candy cane item to a non-consumable definition to prevent unintended movement effects.
- Removed the custom stamina override to restore default sprint behavior.
- Removed the custom gameplay config override to fix asset validation errors on boot.
- Removed an invalid sound set reference from the stats item to fix asset validation.
- Restored the infinite stamina override.
- Re-enabled player collision removal on connect to fully disable player-player collision.
- Removed player collision after connect/ready/world events on the world thread to ensure it sticks.
- Fixed the collision removal hook to handle PlayerReadyEvent references correctly.
- Added a periodic collision cleanup task and removed the invalid AddPlayerToWorldEvent hook.
- Only broadcast map completion globally when the run is a new personal best.
- Changed the admin chat tag color to red.
- Added a /pkadmin population history view with sampled online player counts and a simple chart.
- Track online player counts via connect/disconnect events to keep population samples accurate.
- Show only the numeric player count in the population history rows (no bar characters).
- Restore RunTracker telemetry helpers used by HUD and teleport debug.
- Restore RunTracker player cleanup API used on disconnect.
- Restore RunTracker teleport stats drain API used by debug logging.
- Delay run timer start until the player moves off the start position after map start/reset.
- Added Tebex-friendly /pkrank command and VIP/Founder flags on players for rank purchases.
- Allowed /pkrank to run from console while keeping OP-only for in-game use.
- Added VIP/Founder chat tags and nameplate suffixes based on database flags.
- Colored VIP (purple) and Founder (orange) chat tags.
- Set VIP/Founder chat tag parentheses to white and add spacing after rank.
- Added VIP/Founder speed multiplier buttons (x1/x2/x4) in player settings, auto-reset when entering a map.
- Tweaked VIP speed button widths/spacers to prevent cropping.
- Added side padding to VIP speed row so rounded corners show.
- Added playtime and VIP/Founder status fields to the admin player detail page.
- Moved VIP/Founder rank management under /pk admin rank give/remove <player> <vip/founder>.
- Treated Founder as higher than VIP (Founder implies VIP in rank checks and updates).
- Added /pk admin rank broadcast to send a global supporter message and GG prompt.
- Allowed /pk admin rank commands to run from console for Tebex.
- Scheduled rank broadcast messages on world threads for Tebex safety.
- Added playtime admin search and pagination.
- Added /store command for the Hyvexa store link.
- Enlarged Run HUD typography and added a Support Us section.
- Restored Run HUD UI files to satisfy the Pages/Parkour_RunHud.ui lookup.
- Extended the Run HUD background to fit the Support Us section.
- Added centered store.hyvexa.com line under the Support Us bullets.
- Extended the Run HUD background and moved it slightly higher.
- Extended Run HUD background padding so the store line sits inside the box.
- Kept Run HUD loading path as Pages/Parkour_RunHud.ui (resolved under Common/UI/Custom/Pages at runtime).
- Shifted HUD title text left for better alignment.
- Unified /discord and /store link formatting/colors.
- Replaced HUD emojis with ASCII bullets after rendering fallback.
- Added storm icon before the Speed Boost line in the Run HUD.
- Adjusted storm icon texture path to a relative UI path.
- Added star icon before the Exclusive Ranks line in the Run HUD.
- Nudged the store link down for spacing.
- Increased Support/Store section font sizes to match the HUD.
- Increased Support/Store icon sizes and row heights for better alignment.
- Extended Run HUD background bottom padding/height for the footer.
