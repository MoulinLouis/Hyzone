# Changelog

## [Unreleased]

### Added
- **Parkour: Medal times and feather currency** - Maps can now have bronze/silver/gold medal time thresholds (set in `/pk admin` Maps). Beating a threshold earns the medal and feather currency (configurable per category via `/pk admin` -> Medal Rewards). Medals shown on map selection cards; feather balance displayed on parkour HUD next to vexa.
- **Purge: Custom zombie variants admin system** - Replaced hardcoded Slow/Normal/Fast enum with DB-backed variant configs. Admins can create, delete, and customize zombie variants (health, damage, speed) via `/purge admin` -> Variants. Wave config now supports any number of variant types with dynamic +/- count rows.
- **Purge: Lootbox weapon switch system** - Zombies have a 5% chance to drop a lootbox item. Right-click to roll a random owned weapon (excluding current) with a spinning animation UI. Accept to swap your hotbar weapon mid-run, or decline/timeout (10s) to discard. Per-player weapon tracking so each player can use a different weapon in the same session.
- **RunOrFall: New game mode module** - Added `hyvexa-runorfall` with lobby queue, fixed 10s pre-game countdown, destructible platform cuboids, void elimination, and last-player-standing winner flow via `/rof` commands.
- **RunOrFall: Admin setup UI** - Added `/rof admin` page to configure lobby/spawns/platforms, tune void Y and break delay, and control start/stop from buttons.
- **RunOrFall: Player stats page** - Added a RunOrFall stats UI (Win, Loose, Winrate, Best win streak, Longest time survived) opened from `Food_Candy_Cane`, with SQL persistence in `runorfall_player_stats`.
- **RunOrFall: Snowflake leaderboard UI** - `WinterHoliday_Snowflake` now opens a RunOrFall leaderboard with search, displaying wins, losses, and winrate (ranked by wins, tie-break by winrate).
- **RunOrFall: Blink active-round ability** - During active rounds, players now get `Ingredient_Lightning_Essence` renamed to `Blink`, teleporting them 7 blocks in their look direction on use.
- **Ascend: Cat Collector easter egg** - 5 hidden cat NPCs in Ascend world. Players find them via NPC dialog, tracked as a secret achievement (X/5 progress).
- **Parkour: Map active toggle** - Admins can disable maps without deleting them via `/pk admin` Maps panel. Inactive maps block both start trigger and map selector entry with a warning message. New `active` column in `maps` table (defaults to TRUE).
- **Purge: Configurable wave compositions** - `/purge admin` now has a Waves panel where staff define per-wave slow/normal/fast zombie counts. Sessions only start when at least one wave exists, spawns are distributed across configured spawn points, and clearing the final configured wave now ends with a win message.
- **Purge: Session start/stop points in admin settings** - `/purge admin` now has a Settings panel (before Spawn Points) to set start spawn (`/purge start`) and exit point (`/purge stop`) from current position.
- **Purge: AK47 weapon upgrade system** - Players can permanently upgrade AK47 damage using scrap via `/purge upgrade`. 11 star levels (0-5 in 0.5 increments). Admins configure damage/cost per level via `/purge admin` -> Weapons page. Replaces the `/aktest` debug command.

- **Ascend: Transcendence (4th prestige)** - Endgame prestige layer at 1e100 volt with BREAK_ASCENSION active. Resets everything including skill tree and challenges. Permanent transcendence count; Milestone 1 unlocks Map 6. Gold-themed UI page, NPC interaction (challenge-gated), and `/transcend` command.
- **Ascend: Map 6 support** - 6th parkour map slot with gold accent, gated behind Transcendence Milestone 1. Balance: 2500 base reward, 68s base time, x4.7 cost multiplier.
- **Ascend: 6 new skill tree nodes** - Runner Speed IV/V, Evolution Power III, Momentum Mastery (x3.0 + 120s), Multiplier Boost II (+0.25), Auto Ascend. Costs 15-75 AP for late-game replay incentive.
- **Ascend: 4 new challenges** - Challenge 5 (50% Runner Speed + Multiplier Gain), Challenge 6 (all Summit bonuses at 50%), Challenge 7 (maps 4 & 5 locked), Challenge 8 (no Elevation or Summit, reward: +25% to both). Total: 8 challenges.

### Changed
- **Dev tooling: Dedicated launch module** - Added `hyvexa-launch` as the IntelliJ classpath anchor for `com.hypixel.hytale.Main`, removing the need to launch the server from `hyvexa-hub` classpath.
- **RunOrFall: Multi-map admin + map-linked setup** - Added map list management in `/rof admin` and `/rof map ...`, moved lobby/spawns/platforms to per-map config, and removed platform naming requirement.
- **RunOrFall: Admin-configurable blink distance** - Added a `/rof admin` field to set Blink teleport distance in blocks (used live by `Ingredient_Lightning_Essence`).
- **RunOrFall: Admin-configurable blink charge economy** - Added `/rof admin` fields for blink start charges and blocks broken per extra blink charge.
- **RunOrFall: Platform block-item-id filter** - `/rof admin` platform save now requires a block item ID (e.g. `Rock_Marble_Brick_Smooth`), and platform destruction only applies to blocks matching that configured item ID.
- **RunOrFall: Configurable auto-start countdown tiers** - Added `min players`, `min players time`, `optimal players`, and `optimal players time` settings in `/rof admin`; countdown auto-starts with min tier and drops to optimal tier when enough players join.
- **RunOrFall: Leaderboard category checkboxes + wider layout** - Replaced text-based category toggles with checkbox controls (`Total wins`, `Best win streak`, `Longest time alive`), widened leaderboard rows/window to reduce text truncation (`...`), and colorized stats by category to match RunOrFall Stats colors (`W` green, `L` red, `%` blue, best streak yellow, longest time violet).
- **RunOrFall: Configurable block break delay** - Added delayed block destruction with configurable delay (`/rof breakdelay <seconds>`, default `0.2s`).
- **RunOrFall: Round-start grace before breaking blocks** - Block destruction now starts 3 seconds after the round begins, with chat countdown messages (3..2..1).
- **RunOrFall: SQL-backed config persistence** - RunOrFall config now saves/loads from MySQL tables (`runorfall_settings`, `runorfall_spawns`, `runorfall_platforms`) instead of JSON, with one-time legacy migration support.
- **RunOrFall: Join/Leave hotbar items** - Added `Ingredient_Life_Essence` (join lobby) and `Ingredient_Earth_Essence` (leave lobby) shortcuts equivalent to `/rof join` and `/rof leave`.
- **RunOrFall: Contextual hotbars by state** - Hotbar now switches per player state: default (`Join`, `Leaderboards`, `My Stats`, `Game Selector`), lobby (`Leave`, `Leaderboards`, `My Stats`), and active round (no RunOrFall items).
- **RunOrFall: In-round leave item on slot 9** - Active rounds now keep `Leave Lobby` in hotbar slot 9 (with Blink), and leaving mid-round is treated as an elimination for that player.
- **RunOrFall: Auto map selection by lobby size** - Each map now has its own minimum player setting; round start picks the eligible map with the highest minimum <= lobby size, with random choice when multiple maps share that same minimum.
- **RunOrFall: Coins currency + round rewards** - Added persistent RunOrFall coins shown in HUD, with gains of `+1` every 30s alive, `+5` per eliminated player, and `+25` for round winner (chat message on each gain).
- **RunOrFall: Coins feature removed + round outcome chat updates** - Removed RunOrFall coins backend/HUD rewards, added explicit chat announcements for in-round eliminations and winner.
- **RunOrFall: Multi-category leaderboard** - RunOrFall leaderboard now has 3 clickable categories (`Total wins`, `Best win streak`, `Longest time survived`) with per-category ranking and display.
- **RunOrFall: Broken-block HUD counter** - Added a per-player `Blocks broken` counter in the RunOrFall HUD, displayed at the bottom-left and updated in real time during rounds.
- **RunOrFall: Stats now track blocks broken + blinks used** - `/rof stats` now shows lifetime totals for broken platform blocks and successful blinks, with SQL persistence and automatic DB column migration.
- **RunOrFall: Blink charge system + HUD counter** - Players now use blink charges, see available blinks in HUD next to `Blocks broken`, and earn extra charges from broken platform blocks based on admin-configured settings.
- **RunOrFall: Blink SFX feedback** - Added `SFX_Avatar_Powers_Enable_Local` when earning a blink charge and `SFX_Skeleton_Mage_Spellbook_Impact` when using blink.
- **RunOrFall: Winner victory SFX** - Round winners now hear the same victory sound as Parkour map completion (`SFX_Parkour_Victory`).
- **RunOrFall: My Profile menu + trimmed settings** - Added a `My Profile` silk hotbar item (Ascend skin) with links to RunOrFall stats, placeholder achievements, and a reduced settings page containing only music options and HUD visibility.
- **Hub: Game Selector RunOrFall card** - Added RunOrFall to the "Welcome to Hyvexa" selector, arranged modes in a 2x2 grid (Parkour/Ascend top row), and restricted RunOrFall routing to OP/staff for now.
- **Purge: Expanded weapon upgrade/admin options to full Hyguns arsenal** - `/purge upgrade` and `/purge admin -> Weapons` now include Glock18, ColtRevolver, DesertEagle, Mac10, MP9, Thompson, AK47, M4A1s, Barret50, DoubleBarrel, and Flamethrower (Frag excluded).
- **Purge: Weapon-specific icons in upgrade/admin pages** - Added per-weapon Hyguns icons for selection cards and the upgrade detail panel.
- **Parkour: Map Admin UI height increased** - Increased the Map Admin window height by 50px for more vertical space.
- **Parkour: Practice start now auto-sets checkpoint** - Enabling practice now creates a practice checkpoint at the player's current position.
- **Parkour: Leave Practice flow** - Added a separate Leave Practice item (same skin as Start Practice) that exits practice, returns players to their practice start position, and restores pre-practice checkpoint progression.
- **Parkour: Removed struggle/practice hint popups** - The "Having Trouble?" and "Try Practice Mode" UI popups are fully removed and no longer shown.
- **Ascend: Replaced Elevation Boost with Auto Ascend** - Skill tree node at tier 12R now skips the ascension popup and cinematic, instantly ascending when reaching 1Dc. Players who had Elevation Boost get Auto Ascend automatically.
- **Ascend: AP Multiplier system** - Each completed challenge grants +1 to AP multiplier (base x1, max x8). Replaces old per-challenge permanent bonuses. Displayed in the Challenges tab.
- **Ascend: Summit XP softcap at level 1000** - Removed hard cap at level 1000 (unlimited levels). XP cost per level rises from level^2 to level^3 above 1000 — same volt reaches fewer levels (old 5000 -> ~3591).

### Fixed
- **Hub/Wardrobe: Classpath asset-pack conflict** - Server launch is now decoupled to `hyvexa-launch`, and `hyvexa-hub` is packaged again as a normal plugin asset-pack (`IncludesAssetPack` from `includes_pack`), so Hub UI/items ship in `HyvexaHub-*.jar` without separate `HubAssets` staging.
- **Purge: Variant HP now respects configured absolute value across NPC types** - Zombie variant health no longer over-scales for non-vanilla NPC types (e.g. `Zombie_Aberrant`); configured HP is applied correctly before wave scaling.
- **RunOrFall: Spectator/Disconnect round flow** - Players joining during an active round now get teleported to lobby as spectators, and disconnects are counted as eliminations.
- **RunOrFall: Leave lobby now returns to spawn** - Voluntary leave (`/rof leave` and leave hotbar flow) now teleports the player to the world spawn.
- **RunOrFall: Countdown moved from chat to HUD** - `Starting in ...` is now displayed in the RunOrFall HUD instead of chat countdown spam.
- **RunOrFall: Winner return to lobby** - Round winner is now teleported back to lobby when the game ends.
- **RunOrFall: Blink item conflict with Parkour restart fixed** - `Ingredient_Lightning_Essence` now resolves to Blink behavior/name in RunOrFall, while Parkour restart uses its dedicated checkpoint item id.
- **RunOrFall: Blink vertical direction/clamp fixed** - Blink now follows look pitch correctly (up goes up), and never teleports below the player's current Y.
- **RunOrFall: Blink east/west direction fixed** - Horizontal X direction is now aligned with player look direction (east/west no longer inverted).
- **RunOrFall: Blink now preserves full look orientation** - Teleport now keeps both vertical and horizontal head orientation after blink.
- **RunOrFall: Blink wall-clip protection** - Blink now checks collisions along its path and stops at the last free point before a block, preventing phase-through.
- **RunOrFall: Blink collision sweep hardened** - Path collision now sweeps a full player-like footprint/height to prevent diagonal edge clipping through walls.
- **RunOrFall: Blink can pass through configured platform blocks** - Blink collision now treats blocks matching the active map platform definitions as pass-through, while keeping wall collision against other solids.
- **Parkour: Restart checkpoint orb skin restored** - Parkour restart now uses a dedicated orb item id again, so Blink changes no longer alter its appearance.
- **RunOrFall: Solo test start support** - `/rof start` can now launch with one player for testing, without immediately ending the round.
- **RunOrFall: Edge-standing block bypass fixed** - Blocks now break from the player's full foot footprint, preventing side/edge standing exploits.
- **RunOrFall: Break-delay trail reliability** - Fast movement no longer skips walked blocks; each touched step starts its own delay while still targeting the closest footprint block first.
- **RunOrFall: My Stats item routing** - `Food_Candy_Cane` now opens RunOrFall Stats when used in the RunOrFall world (instead of Parkour Stats).
- **RunOrFall: /rof status permission** - `/rof status` is now restricted to OP/admin users.
- **Parkour: Fly-zone warning now only applies with practice fly enabled** - The "You don't have the right to go there." rollback protection no longer triggers when practice is enabled but fly is OFF.
- **Purge: Deep-dive stability pass** - Fixed spawn/end race leaks, moved session teardown entity/inventory mutations onto world thread cleanup, replaced unsupported upgrade-card accent runtime background writes with visibility variants, added world-transfer HUD/loadout reconciliation, batched per-tick world work, improved purge error observability, and cleaned dead code/resources.
- **Purge: Session and wave edge-case hardening** - Wave clear now requires successful spawns (except explicit zero-zombie waves), wipe/clear transitions run after world-thread death processing, `/purge start` now enforces party leader-only launch, and instance release waits for player + zombie cleanup futures with timeout fallback logging.
- **Purge: Idle hotbar slot correctness on world entry** - Purge idle loadout now validates expected item IDs per slot and replaces mismatches, so slot `0` consistently restores the blue start orb after hub transfer.

### Added
- **Global: Analytics system** - Event-based analytics tracking gameplay events (joins, completions, duels, mode switches, purchases, Ascend progression). Daily aggregates computed into `analytics_daily` table. OP-only `/analytics` command shows DAU, retention, session length, and mode split. 90-day event retention with auto-purge.
- **Global: Cosmetic Shop** - `/shop` command opens a UI to buy, equip, preview, and unequip 6 glow cosmetics (100 vexa each). Equipped cosmetics persist across reconnects.
- **Global: Discord rank role sync** - Linked players' parkour ranks (Unranked -> VexaGod) are automatically synced as Discord roles. Plugin writes rank on rank-up and login; bot polls every 30s and swaps roles.
- **Global: Discord account linking** - Players use `/link` in-game to get a code, enter it on Discord via `/link <code>`, and receive a one-time 100 vexa reward on next login. Includes a Discord bot (`discord-bot/`) and shared MySQL tables for cross-system communication.

### Changed
- **AscendOnboarding alignment overhaul** - Centralized all tutorial/welcome text into AscendOnboardingCopy.java. Fixed Ascension tutorial claiming "8 nodes" (actual: 11) and naming non-existent nodes. Fixed Welcome page saying "4 items" (actual: 5). Replaced placeholder text in all 6 tutorial .ui files. Added pre-reset explainer modal before auto-ascension cinematic. Added fallback tutorial triggers when opening elevation/summit/ascension pages. Standardized terminology to "Ascendancy Tree" + "AP" everywhere.
- **Ascend: Summit hard cap at level 1000 with deep cap nerf** - Each summit category now has a maximum level of 1000. Added a "deep cap" at level 500 where growth transitions from √ to ⁴√ (heavy diminishing returns). XP is capped, UI shows "MAX" state, and summiting is blocked once reached.
- **Ascend: Elevation multiplier buff** - Elevation multiplier changed from level (1:1) to level^1.05 (slightly super-linear). Higher elevation levels now give progressively better multipliers, rewarding deeper elevation pushes.
- **Ascend: Renamed "Coins" to "Volt"** - All player-facing text, Java identifiers, UI element IDs, database columns, and documentation updated to use "Volt" as the currency name
- **Parkour/Ascend: Tick-path performance cleanup** - Optimized ghost playback sampling/interpolation and reduced per-tick map scanning overhead in run tracking
- **Parkour/Ascend: Ghost stack moved to shared core wrappers** - Recorder/store/interpolation logic now lives in `hyvexa-core` with mode-specific table/resolver adapters and parity tests

### Added
- **Global: Vexa currency** - Cross-mode currency stored in `hyvexa-core`, displayed on all HUDs with green vexa icon. Admin command `/vexa` for set/add/remove/check. Groundwork for future cosmetics and vote rewards.
- **Ascend: Auto-Elevation skill tree node** - New AUTO_ELEVATION node (7 AP) unlocks configurable automatic elevation with multiplier target sequences and optional timer delay. Managed via the Automation page.
- **Parkour: : Advanced HUD toggle** - New "Advanced HUD" ON/OFF toggle in Player Settings that displays a compact panel above the right-side HUD showing real-time orientation (pitch, yaw, roll + cardinal direction), velocity (x, y, z), and speed
- **Ascend: My Profile hub page** - Silk item now opens a "My Profile" page with links to Stats, Achievements, and Settings. Also accessible via `/ascend profile`.
- **Ascend: Expanded achievement system (9 -> 30 achievements)** - 6 categories (Milestones, Runners, Prestige, Skills, Challenges, Secret) with category headers, hidden/secret achievements showing "???" until unlocked, and a Completionist meta-achievement. Fixed First Elevation threshold (was >=1, now >=2).
- **Ascend: Ascension Challenge system** - Players who unlock the Ascension Challenges skill tree node can start timed challenges that snapshot progress, reset state, and apply malus effects (e.g., blocking Evolution Power). Completing an ascension during a challenge records best time and grants bonus summit XP. Progress is fully restored on completion or quit. Crash recovery via DB-persisted snapshots.
- **Ascend: Toast notification system** - HUD-based toast notifications at bottom-left for upgrades, evolutions, purchases, and economy events. 4 stacked slots with category-colored accent bars and countdown progress bars. Consolidates rapid-fire actions. Displays alongside existing chat messages.
- **Ascend: Per-map leaderboard** - "Stats" button in map select replaced with "Leaderboard" showing best times per map with map tabs, search, and pagination. Also accessible via `/ascend maplb`.
- **Ascend: Expanded skill tree (1 → 8 nodes)** - Tree now has Auto Runners, Auto-Evolution, Momentum, Runner Speed, Offline Boost, Summit Memory, Evolution Power+, and Ascension Challenges (teaser). Branch/converge structure with OR-logic prerequisites.
- **Parkour: Fly zone per map** - Admins can define an AABB fly zone per map; players in practice mode are rolled back to their last valid position if they fly outside the zone
- **Ascend: Leaderboard system** - New `/ascend leaderboard` command with tabbed rankings for Volt, Ascensions, and Manual Runs. Includes pagination (50 per page) and player search. Accessible via the Bolt of Stormsilk item.

### Fixed
- **Parkour: Practice restart-to-checkpoint no longer resets run timer** - In practice mode, using "Restart to checkpoint" no longer falls back to full run reset when no checkpoint is available.
- **Parkour: Practice fall respawn no longer resets run timer** - Falling during practice now respawns without rearming run start/timer reset.
- **Parkour: Practice weapon slot priority** - In practice mode, map weapon items (Sword, Daggers, Glider) are now placed first in the hotbar and other practice items are shifted accordingly.
- **Parkour: Fall respawn restored** - Fall respawn behavior is working again during parkour runs.
- **Ascend: Challenge restore no longer rolls back manual run totals** - Exiting/completing a challenge now preserves any `totalManualRuns` gained during the challenge instead of restoring an older snapshot value.
- **Ascend: Disconnect/reconnect save race no longer replays stale stats** - Per-player disconnect saves now persist the captured snapshot directly, and reconnect lazy-load reuses pending detached dirty state instead of reloading older DB rows.
- **Ascend: PB detection now uses authoritative best-time fallback** - Manual finish PB checks now fallback to DB when in-memory best time is missing, and map best-time upserts are monotonic (can only improve), preventing slower runs from overwriting PB/leaderboard.
- **Ascend/Hub: Low-priority review cleanup** - Clarified Ascend map balance source-of-truth and migration staging (legacy read/write drift), and updated Hub Ascend denial copy to match whitelist-restricted access behavior
- **Parkour/Ascend: Completed medium-priority stability/maintainability pass** - Correct XP award deltas on completion, null-safe admin transform reads, shared throttled async error logging, and snapshot-based Ascend map-select refresh with dispatch/lifecycle refactors
- **Ascend: Closed crafted map-selection unlock bypass** - Map select now validates payload map IDs against displayed entries and enforces unlock requirements instead of force-unlocking.
- **Ascend/Parkour UI: Replaced fragile runtime tab/card background state writes** - Selected/active visuals now use dedicated overlay visibility toggles for more reliable rendering.
- **Ascend: Disconnect persistence no longer triggers full-store flush** - Disconnect path now queues targeted per-player async saves while preserving shutdown full flush behavior.
- **Parkour: Hardened debug/admin command access** - `/pkadminitem` and `/pkmusic` now require OP and clearly label staff-only usage
- **Ascend: Cinematic/runner failures are now observable and recoverable** - Silent catches were replaced with throttled phase/context warning logs, and the cinematic now always schedules a movement/camera restore finalizer
- **Parkour/Ascend: Closed two completion/stat races** - Jump flush now uses remove-drain semantics and near-finish checks now enforce one in-flight completion check per player
- **Ascend: Added async backpressure guards for tick and page refresh loops** - Per-world tick jobs and auto-refresh UI updates now coalesce overlapping work instead of queueing unbounded async tasks
- **Ascend: Passive earnings leave tracking now uses true world-edge transitions** - Leave timestamps are only recorded on real Ascend -> non-Ascend transitions and Ascend-state disconnects
- **Ascend: Test commands are now production-gated** - `/ctest` and `/hudpreview` register only when `ascend.enableTestCommands=true` and now require OP
- **Parkour: Completion writes no longer block world ticks** - Map completion DB writes/retries now run asynchronously with post-save warning signaling for failures
- **Parkour: Debounced progress saves no longer drop dirty updates** - Save cycles now snapshot dirty IDs, clear only successful writes, and immediately requeue when dirty state remains
- **Ascend: Same-player dirty updates are preserved across save windows** - Dirty tracking now uses per-player versions so in-flight saves cannot erase newer updates
- **Ascend: Fixed Hub -> Ascend inventory sync race** - Menu-item hotbar sync now waits for player world attachment before writing inventory, preventing null-world `ItemContainerChangeEvent` spam during world transfer
- **Core reliability: fixed high-priority race/leak issues** - Ascend counter/spend paths now use atomic CAS patterns, disconnect handlers clear lingering per-player caches, and hub/respawn null-race edge cases were closed
- **Ascend: Evolution Power now applies to runner evolution** - Each star multiplies the multiplier gain by the Evolution Power value (e.g., ×2 base: 0★=0.10, 1★=0.20, 2★=0.40, 3★=0.80). Higher Summit Evolution Power makes each star exponentially stronger.
- **Ascend: Added error handling for atomic database operations** - Passive earnings now logs failures when atomic coin/multiplier updates fail
- **Ascend: Added transaction support for multi-table saves** - Player save operations now use database transactions with rollback on failure
- **Ascend: Standardized file path construction** - Unified path handling for config files using Path.of() approach
- **Parkour: Leaderboard map hologram placeholder** - "No completions yet." now appears correctly when a map has no times

### Removed
- **Ascend: Removed unused MAP_RUNNER_PRICES constant** - Dead code cleanup (runners are free after map unlock)
- **Ascend: Multiplier gain display now shows 2 decimal places** - Values like +0.15x now display correctly instead of rounding to +0.2x
- **Parkour/Core: Removed unused legacy classes** - Deleted unused command classes, old HUD/teleport helpers, and the parkour-only visibility wrapper

### Changed
- **Ascend: BigNumber migration** - Replaced BigDecimal with lightweight `BigNumber(mantissa, exponent)` for all coin/multiplier values. Removes 10^63 DB ceiling, simplifies arithmetic. One-time DB migration converts DECIMAL columns to mantissa+exp10 pairs. Atomic SQL operations replaced with in-memory CAS + debounced save.
- **Ascend: Elevation now uses accumulated coins** - Elevation levels are based on total coins earned since last reset, not current balance. Spending on upgrades no longer reduces elevation potential. Resets on elevation, summit, or ascension.
- **Ascend: Elevation costs reduced at mid/high levels** - Cost curve exponent 0.77 → 0.72 (early), 0.63 → 0.58 (late). Level 1 unchanged, level 100 is 63% cheaper, level 200 is 85% cheaper
- **Ascend: Player data now uses lazy loading** - Players are loaded from database on-demand when they connect and evicted on disconnect, reducing memory usage for large player counts
- **Ascend: Summit XP numbers compressed** - Level exponent reduced from 2.5 to 2.0, coins→XP uses power 3/7 instead of sqrt. Same coins reach same levels but XP displays are much smaller (level 50: 17,678 → 2,500 XP)
- **Ascend: Evolution default multiplier bonus adjusted** - Evolved runners now apply ×2 multiplier gain per run instead of ×10
- **Ascend: Summit system rebalanced for late-game** - Summit now requires 1T coins minimum for first level (was 10K), and resets multipliers/runners like elevation
- **Ascend: Map selector shows run time and multiplier gain** - Displays actual runner completion time and multiplier gain per run (e.g., "Run: 2.34s (+0.1x) | PB: 5.00s")
- **Ascend: Runner speed gain per level standardized** - All maps now use +10%/level for runner speed upgrades
- **Ascend: Early-game unlock pacing** - Added decaying cost boost for levels 0-9 on maps 2+ to create more gap between map unlocks without affecting late-game
  - Map 2 (Orange): up to ×1.5 boost, Map 3 (Jaune): ×2.0, Map 4 (Vert): ×2.5, Map 5 (Bleu): ×3.0
  - Boost decays linearly from level 0 (full) to level 10 (none), ensuring costs always increase
- **Ascend: Migrated economy from double to BigDecimal for exact precision**
  - All coin values now use `BigDecimal` for exact arithmetic (no floating-point errors)
  - Database schema updated: `DOUBLE` columns migrated to `DECIMAL(65,2)` for coins, `DECIMAL(65,20)` for multipliers
  - Supports values beyond 1 trillion (10^12) without precision loss
  - All economy formulas use pure BigDecimal arithmetic (no `Math.pow()` or double intermediates)
  - Added atomic SQL operations to prevent race conditions with concurrent player operations
    - `atomicAddCoins()`, `atomicSpendCoins()`, `atomicAddTotalCoinsEarned()`, `atomicAddMapMultiplier()`, `atomicSetElevationAndResetCoins()`
  - All UI purchase operations now use atomic database updates for transaction safety
  - Formula methods updated: `getElevationLevelUpCost()`, `calculateElevationPurchase()`, `calculateSummitLevel()`, `getRunnerMultiplierIncrement()`, `getRunnerUpgradeCost()`
  - Bonus methods now return `BigDecimal`: `getCoinFlowBonus()`, `getRunnerSpeedBonus()`, `getManualMasteryBonus()`
  - **All compilation errors fixed**: Core implementation and all UI files updated
    - Data layer: `AscendPlayerProgress`, `AscendPlayerStore`, `AscendDatabaseSetup`
    - Business logic: `AscendRunTracker`, `RobotManager`, `SummitManager`, `AscensionManager`
    - Display layer: `AscendHud` (including `updateEconomy`, `updateAscensionQuest`), `AchievementManager`, `FormatUtils`
    - UI pages: `AscendMapSelectPage`, `ElevationPage`, `SummitPage`, `AscensionPage`, `StatsPage`, `AscendAdminCoinsPage`
    - Plugin integration: `ParkourAscendPlugin`
    - Fixed all type mismatches: `double` → `BigDecimal`, `long` → `BigDecimal` where needed
    - Fixed all comparisons: primitive operators → `.compareTo()`
    - Fixed all arithmetic: primitive operators → `.add()`, `.subtract()`, `.multiply()`
    - Fixed display conversions: added `.doubleValue()` for UI calculations
    - Fixed bonus method handling: `SummitManager` returns `BigDecimal`, `AscensionManager.getRunnerSpeedBonus()` returns `double`
  - Migration pattern documented in `docs/BIGDECIMAL_MIGRATION_STATUS.md` for future reference
- **Ascend: Map unlock requirement increased from 3 to 5 runner upgrades** - Next map unlocks after upgrading runner 5 times instead of 3
- **Ascend: Major economy rebalance for exponential progression feel**
  - **Runner multiplier gains increased 10×**: 0.01 → 0.1 per completion (scales with stars: 0.1/0.2/0.4/0.8/1.6/3.2)
  - **Elevation costs increased 6×**: Base cost 5,000 → 30,000 coins (maintains progression curve)
  - **Runner upgrade costs rebalanced**: Base formula reduced from 60× to 20× (×2 inflation instead of ×6)
  - **Strategic evolution system**: Desynchronized cost and gain scaling to make evolution a meaningful choice
    - **Gain scaling**: ×2 per star (0.1 → 0.2 → 0.4 → 0.8 → 1.6 → 3.2)
    - **Cost scaling**: ×2.2 per star (1 → 2.2 → 4.84 → 10.65 → 23.43 → 51.54)
    - **Cost/gain ratio**: 1.10 → 1.61 across all star levels (slightly inefficient but never punitive)
    - Evolution remains profitable long-term (~10-15 completions to break-even) but requires strategic timing
    - Creates meaningful choice: evolve now (patience) vs. max current level (immediate gains)
  - **Early-game boost**: First 5 levels (0-4) cost ÷4 for smooth 2-3 minute onboarding
    - 0★ Lv 0→1: ~5 coins, Lv 1→2: ~15 coins, Lv 2→3: ~35 coins
  - **Speed upgrades scale by map difficulty**: Higher-level maps gain more speed per upgrade
    - Map 0 (Rouge): +10% per level | Map 1 (Orange): +15% per level
    - Map 2 (Jaune): +20% per level | Map 3 (Vert): +25% per level
    - Map 4 (Bleu): +30% per level
    - Rewards investing in harder maps with faster runner completion times
  - **Net result**: ~50% faster progression with much bigger numbers (thousands by 5-10 min, millions by 15-20 min)

### Added
- **Ascend: Walk-on-start feature** - Players can now start a map by walking onto its start position (if unlocked)
- **Ascend: Passive Earnings System**
  - Runners continue to generate coins (at 25% rate) when player is not on Ascend world
  - Accumulates up to 24 hours of offline time (minimum 1 minute away)
  - All multipliers (elevation, summit, map) apply to passive earnings
  - Timestamp tracking in database (`last_active_timestamp`, `has_unclaimed_passive`)
  - Welcome back popup UI showing detailed breakdown per runner
  - Coins and multipliers automatically applied on return
  - Tracks when players leave Ascend world (to hub, other world, or disconnect)
  - Shows runner-by-runner breakdown: runs completed, coins earned, multiplier gained
  - Visual feedback with color-coded accent bars and star indicators per runner
- **Ascend: Access whitelist system**
  - Added whitelist system to control access to Ascend mode via the Hub menu
  - Admin commands remain OP-only; whitelist only affects Hub menu access
  - Whitelist stored in `run/mods/Parkour/ascend_whitelist.json` (JSON format with enabled flag)
  - Admin UI accessible via `/as admin` > "Whitelist" button
  - Full UI with text field to add players and list of whitelisted players with remove buttons
  - **Toggle button to enable/disable whitelist:**
    - **ENABLED**: Whitelisted players + OPs can access Ascend mode
    - **DISABLED** (default): Only OPs can access (secure default behavior)
  - Button displays current status: "ENABLED" or "DISABLED"
  - Command-line interface: `/as admin whitelist <add|remove|list|enable|disable|status> [username]`
  - Case-insensitive username comparison for consistent behavior
  - Whitelist status persisted in JSON file (`enabled: true/false`, defaults to `false`)

### Fixed
- **Ascend: Fixed UI crash when interacting with external NPCs after opening menus**
  - Fixed "Selected element in CustomUI command was not found" crash when opening `/ascend` or `/ascend elevate` menus then interacting with NPCDialog NPCs
  - Implemented proper `onDismiss()` lifecycle callback in `BaseAscendPage` to detect when UI is replaced by external systems
  - Background UI refresh tasks now stop immediately when page is dismissed or replaced
  - Added defensive try-catch blocks around all `sendUpdate()` calls as fallback protection
  - Affected pages: ElevationPage, AscendMapSelectPage, StatsPage

### Changed
- **Ascend: Simplify elevation menu to show multiplier progression**
  - Removed redundant coin balance display from `/ascend elevate` menu (already visible on main HUD)
  - Display now shows dynamic progression toward next multiplier (e.g., "Progress to x2: 3,200 / 5,000 coins")
  - Current coins update in real-time as player earns from runners and manual completions
  - Added "GLOBAL MULTIPLIER" title above multiplier display card for clarity
  - Increased font sizes across the menu to match main ascend UI (14px for labels, 16px for gain text)
  - Increased page height from 380 to 420 pixels to accommodate larger text
  - Fixed duplicate Anchor declaration in multiplier display
  - Discount percentage still displayed if player has elevation cost reduction from skill tree

- **Ascend: Elevation system rebalanced for slower progression**
  - Increased base elevation cost from 1,000 to 5,000 coins (5x harder)
  - Increased cost growth rate from 1.08 to 1.15 (steeper curve)
  - First elevation now requires proper runner setup and time investment
  - Mid-game progression (levels 10-20) significantly slower but still achievable
  - Late-game (30+) requires substantial coin generation infrastructure
  - Multiplier formula unchanged (level = multiplier) to preserve linear feel

- **Ascend: Early-game progression rebalance**
  - Reduced first runner upgrade cost from 100 to ~10 coins (~10 manual runs)
  - Implemented obscure quick-ramp formula for upgrade costs (no longer simple doubling)
  - Added map-based pricing: higher-level map runners cost significantly more to upgrade
  - Rouge (map 0): 1.0x cost multiplier, Bleu (map 4): 3.5x cost multiplier
  - Example: Rouge runner level 0→1 costs 10 coins, Bleu runner level 0→1 costs 1,452 coins

- Add visual affordability indicator for runner button in parkour-ascend:
  - Level text ("Lv.X" or "MAX") and button top accent bar change color based on upgrade affordability.
  - When player has enough coins for upgrade: uses map accent color (violet, blue, cyan, etc.).
  - When player cannot afford upgrade: changes to white (#ffffff).
  - Progress bar segments (showing runner level) always keep their accent color.
  - Color updates automatically every 500ms while menu is open to reflect passive coin earnings.
  - Scheduled task starts when menu opens and stops when menu closes.
  - Applied in buildMapList, updateRobotRow, addMapToUI, and periodic affordability updates.
  - Only applies to "Upgrade" action - other states (Buy Runner, Evolve, Maxed, Complete First) always use accent color.
- Make runner purchases free and simplify button text in parkour-ascend:
  - Buying a runner is now completely free (no coins required).
  - Removed "Free" text from button display - "Buy Runner" now shows with no cost text.
  - "Complete First" button now shows with no cost text (previously showed "Free").
  - Simplified button text logic: only "Upgrade" actions show cost, all other actions show no price.
  - Updated purchase logic in handleRobotAction and handleBuyAll to not charge for runner purchases.
  - Success message changed from "Runner purchased for X coins!" to "Runner purchased!".
- Remove unnecessary decimals from coin cost display in parkour-ascend:
  - Modified `FormatUtils.formatCoinsForHudDecimal()` to display whole numbers without ".00" suffix.
  - Small amounts (< 1M): Show as integers when applicable (e.g., "1500" instead of "1500.00").
  - Large amounts with suffixes: Strip trailing zeros (e.g., "2M" instead of "2.00M", but keep "2.5M").
  - Applies to all runner upgrade costs, robot purchases, and other coin displays using this formatter.
  - Reduces visual clutter since upgrade costs are always fixed whole amounts.
- Add visual affordability indicator for Runner upgrade button in parkour-ascend:
  - Runner upgrade button changes background and accent color based on player's coin balance.
  - Restructured button to use transparent ButtonStyle with controllable `#ButtonBackground` Group.
  - **Active state** (enough coins):
    - Background: Normal dark (#000000 with 0.25 alpha)
    - Accent bar: Map's accent color (violet, blue, cyan, etc.)
    - Button hover adds subtle white overlay
  - **Disabled state** (insufficient coins):
    - Background: Darker with red tint (#2a1515 with 0.6 alpha)
    - Accent bar: Red (#dc2626)
    - Button hover still functional with white overlay
  - Modified `updateButtonAffordability()` to check coin balance and update both background and accent.
  - Applied to all three UI update methods: buildMapList, updateRobotRow, and addMapToUI.
  - Provides immediate visual feedback on upgrade affordability without needing to attempt purchase.
- Fix star display in parkour-ascend /ascend menu:
  - Replaced Unicode star character (U+2605) with star.png image in UI.
  - Unicode character was not supported by the font, causing "?" to display.
  - Added star.png to parkour-ascend resources (copied from parkour module).
  - Updated Ascend_MapSelectEntry.ui to display up to 5 star images above level text.
  - Modified AscendMapSelectPage.java to control star visibility instead of building text.
  - Stars now display as golden star icons matching evolution level (0-5 stars).
  - Reduced button zone to 3 lines max by combining "Upgrade" and cost into single line.
  - "Cost:" displays in bold, followed by coin amount in regular weight on same line.
  - Upgrade costs now use abbreviated format (100K, 1.5M, etc.) matching player coin display.
- Fix erratic ghost NPC rotations in parkour-ascend:
  - Changed angle normalization from 0-360° to -180/+180° to match Hytale's native yaw convention.
  - Improved `lerpAngle()` interpolation to use shortest angular path consistently.
  - Prevents sudden 180° rotation jumps when ghost NPCs cross the ±180° boundary.
  - Ghost NPCs now smoothly follow the player's recorded rotation without erratic left/right snaps.
- Add visual evolution progression for runners in parkour-ascend:
  - Runners now display 6 distinct models based on their evolution level (stars).
  - **Star 0**: Kweebec_Seedling (petit truc cool)
  - **Star 1**: Kweebec_Sapling (bonhomme vert standard)
  - **Star 2**: Kweebec_Sproutling (petit bonhomme vert)
  - **Star 3**: Kweebec_Sapling_Pink (petite fille avec fleur rose)
  - **Star 4**: Kweebec_Razorleaf (soldat avec casque + lance)
  - **Star 5**: Kweebec_Rootling (adulte, le plus grand)
  - Replaced old alternating 2-model system with varied character progression.
  - Provides clear visual feedback as players upgrade their runners.
- Fix UI refresh race condition in parkour-ascend:
  - Added page ID tracking in BaseAscendPage - each page gets a unique ID, stored per-player.
  - New `isCurrentPage()` method checks if this page instance is still the active one for the player.
  - All UI pages now check `isCurrentPage()` before sending any updates.
  - When a new page is created, it automatically becomes the current page for that player.
  - Old pages' refresh tasks detect they're no longer current and stop automatically.
  - Removed complex locking/synchronization in favor of simple ID comparison.
  - Prevents "Selected element in CustomUI command was not found" errors when switching pages.
- Add elevation reset feature in parkour-ascend:
  - When a player elevates, all progression is reset except elevation level.
  - **Coins**: Reset to 0 after elevation purchase.
  - **Map unlocks**: Only map 1 remains unlocked (like fresh start).
  - **Best times**: Cleared for all maps.
  - **Map multipliers**: Reset to 1.0 for all maps.
  - **Runners**: Completely removed - player must buy runners again.
  - **Completed manually**: Reset to false for all maps.
  - Runner NPCs are despawned when elevation occurs.
  - Ghost recordings are preserved for future manual runs.
  - Added `resetProgressForElevation()` method to AscendPlayerStore.
- Wire `/ascend stats` command to open StatsPage UI instead of chat messages:
  - `/ascend stats` now opens the visual Stats page with all player statistics.
  - Removed text-based chat output in favor of the rich UI experience.
  - Cleaned up unused imports and formatLargeNumber method from AscendCommand.
- Add Stats page to parkour-ascend /ascend menu:
  - New "Stats" button (blue) in the action bar opens a dedicated stats page.
  - **Combined Income**: Total coins/sec from all runners with multipliers applied.
  - **Multiplier Breakdown**: Shows digits × elevation × summit = total multiplier.
  - **Lifetime Earnings**: Total coins earned across all time (persists after resets).
  - **Manual Runs**: Total count of manual parkour completions.
  - **Ascensions**: Number of prestige resets performed.
  - **Fastest Ascension**: Best time + live current timer with auto-refresh.
  - New database fields: `ascension_started_at` and `fastest_ascension_ms` in ascend_players.
  - Timer starts on first join, records best time on each ascension.
  - UI files: Ascend_Stats.ui, Ascend_StatsEntry.ui, Ascend_StatsTimerEntry.ui.
- Replace Spawn/NPC buttons with Buy All/Evolve All in parkour-ascend /ascend menu:
  - **Buy All button** (green, replaces Spawn): Purchases all affordable runner upgrades in one click.
    - Handles: buying new runners and speed upgrades only (not evolutions).
    - Logic: collects all purchasable upgrades, sorts by price (cheapest first), buys as many as affordable.
    - If player can afford upgrades for maps 1, 2, but not 3, only maps 1 and 2 are purchased.
  - **Evolve All button** (purple, replaces NPC): Evolves all runners that are ready.
    - Only affects runners at max speed level (Lv.20) that haven't reached max stars.
    - Evolution is free, processes all eligible runners in one click.
  - Both buttons update all affected map cards after action.
  - Removed unused teleport functionality (Vector3d, Vector3f, Teleport, AscendSettingsStore imports).
- Add skill points management to admin panel in parkour-ascend:
  - Added "Skill Tree Points" section to Admin Coins page (via `/as admin` -> Admin Panel).
  - Display current skill points with Add/Remove buttons (same pattern as coins).
  - Text field allows specifying any amount to add or remove.
  - Reset Progress button already resets skill points (confirmed existing behavior).
  - UI updated to show skill points value after Reset Progress.
  - Enlarged Admin Coins panel height (360 -> 520) to fit all elements without overflow.
  - Added `addSkillTreePoints()` method to AscendPlayerStore for direct point manipulation.
- Fix runner lifecycle and orphan cleanup in parkour-ascend:
  - **Root cause fix:** RunnerCleanupSystem was calling `store.removeEntity()` during ECS tick,
    which fails because the store is processing. Replaced with deferred removal pattern.
  - RunnerCleanupSystem now only detects orphans during tick and queues them via
    `RobotManager.queueOrphanForRemoval()` for removal outside ECS processing.
  - Added `pendingRemovals` map to track entities queued for removal.
  - Added `processPendingRemovals()` method that runs in RobotManager tick (outside ECS),
    executing actual removal via `world.execute()` for safe world-thread execution.
  - **Hard cap enforcement:** Added check in `spawnNpcForRobot()` to prevent spawning if
    `entityUuid` is already set (entity may exist in unloaded chunk).
  - **Cross-world cleanup:** When removing RobotState from map, if despawn fails, the entity
    UUID is added to `orphanedRunnerUuids` for cleanup system detection.
  - **Force respawn safety:** When forcing respawn (entity invalid too long + player nearby),
    the old entity UUID is now marked for orphan cleanup before spawning new entity.
  - Updated `isActiveRunnerUuid()` to also check `pendingRemovals` to avoid re-queueing.
  - Updated `isCleanupPending()` to consider both `orphanedRunnerUuids` and `pendingRemovals`.
- Add Ascension quest progress bar to parkour-ascend HUD:
  - Modern card-style horizontal bar positioned above the player inventory.
  - Left and right accent bars in violet (#7c3aed) matching the Ascension theme.
  - Dark glass container (#1a2530 at 95% opacity) for a clean, modern look.
  - Logarithmic scale progression (log10) so early progress feels meaningful.
  - Progress bar fill with subtle glow layer effect.
  - Right accent bar fills vertically to mirror horizontal progress.
  - Displays "ASCENSION" label and percentage (minimalist design).
  - Updates in real-time with other HUD elements via updateAscensionQuest().
- Hide runners during manual runs in parkour-ascend:
  - When a player starts a run on a map, all runners on that map are hidden from the player.
  - Runners are shown again when the run completes or is cancelled.
  - New runners spawning during an active run are automatically hidden from players on that map.
  - Move `PlayerVisibilityManager` to `EntityVisibilityManager` in hyvexa-core for shared visibility filtering.
  - Create `EntityVisibilityFilterSystem` in hyvexa-core for entity visibility filtering across modules.
  - Add `entityUuid` field to `RobotState` to track runner entity UUIDs for visibility control.
  - Add `getRunnerUuidsForMap()` method to `RobotManager` for retrieving all runner UUIDs on a map.
- Unify horizontal card UI design across parkour module:
  - Apply ascend-style horizontal card design to Categories, Maps, and Leaderboard interfaces.
  - Add 8px colored accent bar on the left of each card, dynamically colored by category/rank.
  - Update background to `#1a2530(0.95)` with subtle hover (`#ffffff(0.05)`) and pressed (`#ffffff(0.02)`) states.
  - Update text colors: primary `#f0f4f8`, secondary `#9fb0ba`.
  - Category colors: Easy (green), Medium (blue), Hard (orange), Insane (red).
  - Leaderboard rank colors: 1st (gold), 2nd (silver), 3rd (bronze), 4th+ (gray).
  - Global leaderboard menu: purple accent color.
  - New `UIColorUtils.java` utility class for shared accent color resolution.
  - Update Back/Close buttons to match the new design: `#1a2530(0.95)` background, `#f0f4f8` text, subtle hover/pressed states.
  - Modified entry UI files: `Parkour_CategoryEntry.ui`, `Parkour_MapSelectEntry.ui`, `Parkour_LeaderboardEntry.ui`, `Parkour_LeaderboardMapEntry.ui`, `Parkour_LeaderboardMenuEntry.ui`, `Parkour_MapLeaderboardEntry.ui`.
  - Modified page UI files (Back/Close buttons): `Parkour_CategorySelect.ui`, `Parkour_MapSelect.ui`, `Parkour_LeaderboardMenu.ui`, `Parkour_Leaderboard.ui`, `Parkour_LeaderboardMapSelect.ui`, `Parkour_MapLeaderboard.ui`, `Parkour_Stats.ui`, `Parkour_PlayerSettings.ui`, `Parkour_PlayerMusic.ui`.
  - Modified Java pages: `CategorySelectPage`, `MapSelectPage`, `LeaderboardPage`, `LeaderboardMapSelectPage`, `LeaderboardMenuPage`, `MapLeaderboardPage`.
- Architecture improvements (Phase 4):
  - Add `ModeInventoryManager` to hyvexa-core for shared inventory utilities across all modes.
    - Consolidates duplicate code from InventoryUtils, HubRouter, and ParkourAscendPlugin.
    - Provides: clearAllInventory, clearHotbar, setHotbarItem, setLastHotbarItem, setIfMissing, applyDropFilters.
  - Add `Mode` interface and `ModeType` enum to hyvexa-core for shared mode lifecycle contracts.
    - Defines: onPlayerEnter, onPlayerLeave, attachHud, detachHud, setupInventory methods.
    - Standardizes mode identification and world name resolution.
  - Add `HudLifecycleManager<T>` to hyvexa-core for standardized HUD lifecycle management.
    - Generic manager for any CustomHud subclass with attachment delay handling.
    - Addresses timing inconsistencies between Hub and Ascend HUD attachment.
    - Provides: attach, detach, ensureAttached, isReady, needsAttach utilities.
  - Consolidate all UI files across modules: files in `Common/UI/Custom/Pages/`, code uses `Pages/` prefix.
    - Hytale resolves `Pages/X.ui` to `Common/UI/Custom/Pages/X.ui`.
    - Remove all duplicate UI files from `Pages/` and `Custom/Pages/` directories.
    - Update CODE_PATTERNS.md, HYTALE_API.md, AGENTS.md, and CLAUDE.md with correct UI path convention.
- Code review fixes for parkour-ascend module:
  - Fix race condition in GhostRecorder by taking a snapshot of activeRecordings before iteration.
  - Add null guards and exception handling to ParkourAscendPlugin manager access and HUD updates.
  - Add bounds checking to AscendConstants.getElevationLevelUpCost() to prevent integer overflow at high levels.
  - Add MAX_SAMPLES limit (12000) to GhostStore to prevent DoS via oversized ghost recordings.
  - Add exception handlers to CompletableFuture.runAsync() calls in ParkourAscendPlugin.
  - Fix ASCEND_MODULE_SUMMARY.md speed upgrade documentation (was 10%, now correctly shows 15%).
  - Add ascend_ghost_recordings table documentation to DATABASE.md.
  - Delete duplicate docs/AGENTS.md (keep docs/codex/AGENTS.md).
  - Archive stale plan documents from docs/plans/.
- Simplify elevation system: elevation IS the multiplier directly:
  - Removed "Lv." prefix from HUD and all displays.
  - Elevation value = multiplier value (e.g., elevation 200 = x200 multiplier).
  - No more level-to-multiplier conversion formula.
  - Removed `calculateElevationMultiplier()` function.
  - HUD shows elevation as a standard multiplier (e.g., "x200.00").
- Display coins and gain per run with 2 decimal places in Ascend:
  - Changed coin storage from `long` to `double` throughout the codebase for fractional precision.
  - Database columns `coins` and `total_coins_earned` automatically migrated from BIGINT to DOUBLE on startup.
  - Coin payouts (manual runs, robots) now preserve decimal precision instead of using `Math.floor`.
  - `getCompletionPayout()` returns `double` instead of `long`.
  - All coin displays now show exactly 2 decimal places (e.g., "1234.00", "1.50").
  - Affects HUD display, `/ascend` command output, Elevation page, Summit page, Ascension page, and admin panel.
  - Fixed payout calculation order: coins are now awarded BEFORE the multiplier increases, so players get the payout based on their current multiplier, not the new one.
- Add teleport buttons to Ascend map select page:
  - **Spawn button**: Teleports player to configurable spawn location.
  - **NPC button**: Teleports player to configurable NPC location.
  - Third button remains placeholder for future features.
  - Both locations configurable via `/as admin` → "Admin Panel" → "Set Spawn/NPC Location".
  - New `ascend_settings` table stores spawn and NPC positions with rotation.
- Rework Elevation system with level-based prestige mechanics:
  - **New progression curve**: Exponential costs with diminishing returns (like Revolution Idle prestige).
    - Cost formula: `1000 × 1.08^level` (costs grow +8% per level).
    - Multiplier formula: `1 + 0.1 × level^0.65` (soft cap, never linear).
    - Example: Lv.10 costs ~2.2K for x1.45, Lv.50 costs ~47K for x2.45, Lv.100 costs ~2.2M for x3.27.
  - **Level-based display**: Shows "Lv.N (x1.XX)" instead of just "xN".
  - **Bulk purchasing**: Automatically calculates and purchases all affordable levels at once.
  - **Skill tree integration**: COIN_T3_ELEVATION_COST now applies -20% to exponential costs.
  - **Real-time updates**: Page auto-refreshes every second to reflect runner coin earnings.
  - **UI improvements**:
    - Compact container (340x380) for cleaner layout.
    - Horizontal "Current -> New" level display with calculated multipliers.
    - Dynamic gain indicator shows "+N levels" or "Need X more" coins.
    - Cost display shows next level price with discount percentage if skill unlocked.
- Add total jump count tracking for players:
  - Tracks every jump (onGround → airborne transition) per player, cumulative forever.
  - New `jump_count BIGINT` column in `players` table.
  - Jumps are batched in memory and flushed to database via existing queueSave() debounce (5s).
  - Displayed in the Stats page ("Total Jumps: X").
  - Minimal performance impact: single boolean comparison per tick per player, periodic batch save.
- Implement 5 retention features to improve new player onboarding and reduce early churn:
  - **Mandatory 3-screen tutorial** replaces command-heavy welcome page:
    - Screen 1: Welcome message with Continue button.
    - Screen 2: Explains Map Selector in hotbar slot 1, "Show Me Maps" button opens CategorySelectPage and marks tutorial complete.
    - Screen 3: Introduces Practice Mode with "Got It" button to close.
    - Tutorial only shows once per player (welcome_shown flag).
  - **Smart map recommendations** after 5+ failures with no checkpoint progress:
    - Clean popup: "Having trouble with [MapName]?" with 3 options: Try Different Map (opens map selector filtered to same category), Practice Mode, Continue.
    - Only shows once per map per session to prevent spam.
    - Prevents accidental jumps to harder categories.
  - **Attempt counter** normalizes failure on map completion:
    - New completion messages: "MAP COMPLETED: [MapName]", "Time: X.Xs", "Attempts: N" (only if > 1), "Keep practicing - you got this! 🔥".
    - Tracks attempts per map in session-only SessionStats (non-persistent).
  - **Practice mode awareness**:
    - Tutorial Screen 3 introduces Practice Mode.
    - Proactive suggestion popup after 3 failures: "Try Practice Mode - Set checkpoints to restart from any point! [Enable Practice] [Not Now]".
    - Only shows once per map per session if not already in practice mode.
  - **TeleportHintManager** for first-time users:
    - Shows "💡 Map Selector" hint for first 5 teleport item uses.
    - Corridor walking hint: "💡 Tip: Use Map Selector to find easier maps!" (stub for future corridor detection).
    - New database column: `teleport_item_use_count` in `players` table.
  - **Session-only tracking** prevents memory leaks and database bloat:
    - SessionStats class in RunTracker tracks per-map failures, attempts, and popup flags per player.
    - Clears on disconnect/clearPlayer, no persistence.
  - UI changes:
    - 3 new tutorial pages: Parkour_WelcomeTutorial_Screen1/2/3.ui and corresponding Page classes.
    - 2 new popup pages: Parkour_MapRecommendation.ui, Parkour_PracticeModeHint.ui and Page classes.
    - InventorySyncManager.showWelcomeIfFirstJoin() now opens WelcomeTutorialScreen1Page instead of WelcomePage.
  - Database changes:
    - New column: `teleport_item_use_count INT NOT NULL DEFAULT 0` in `players` table.
    - ProgressStore methods: getTeleportItemUseCount(), incrementTeleportItemUseCount().
  - All features designed to guide weak players to Easy-1 and prevent rage-quit spiral from walking into random hard maps.
- Implement ghost replay system for personalized runner movement:
  - Runners now follow the player's exact path from their personal best manual completion.
  - Player position and rotation are sampled every 50ms during manual runs (20 samples/sec).
  - Sampling executes on world thread for proper entity component access.
  - Ghost recordings are saved only when achieving a new personal best time.
  - Smooth 60fps playback through linear interpolation between samples.
  - Speed upgrades time-compress playback (10x speed = complete in ~10% of recorded time).
  - Runner purchase gated behind manual completion (guarantees ghost exists).
  - Personal best times tracked per map in new `best_time_ms` column.
  - Personal best times displayed in `/ascend` menu (e.g., "PB: 12.34s").
  - Database: New `ascend_ghost_recordings` table stores GZIP-compressed BLOB recordings (~5-10 KB per map).
  - Completely replaced waypoint-based movement system (waypoints removed entirely).
  - Automatic migration: Existing runners without ghosts are refunded and removed on first startup.
- Optimize `/ascend` menu performance:
  - Removed unnecessary 1-second refresh cycle for status text.
  - UI only updates when runner is purchased/upgraded or on menu open.
  - Eliminates text flickering and reduces server load.
- Replace coin-based map unlocking with progressive runner-level unlocking:
  - Map 1 is unlocked by default for all players.
  - Maps 2-5 unlock automatically when the runner on the previous map reaches level 3.
  - Once unlocked, maps stay permanently unlocked (even if runner is evolved/reset to level 0).
  - Locked maps are completely hidden from the `/ascend` menu.
  - Instant notification when reaching level 3: "New map unlocked: [Map Name]!".
  - Retrocompatibility: Existing players auto-unlock eligible maps based on current runner levels on next menu open.
  - Map unlock prices are now obsolete but remain in constants for reference.
- Fix admin reset progress button to completely reset all player data:
  - Now resets Summit levels (all bonus categories).
  - Now resets skill tree points and all unlocked skill nodes.
  - Now resets all achievements and active title.
  - Now resets all statistics (total coins earned, manual runs, consecutive runs).
  - Database cleanup: deletes all entries from ascend_player_maps, ascend_player_summit, ascend_player_skills, and ascend_player_achievements tables.
  - Previously only reset coins, elevation multiplier, and map progress, leaving Summit and skill tree data intact.
- Rebalance Ascend runner speeds for more satisfying gameplay:
  - Increase speed upgrade multiplier from +10% to +15% per level (max level now grants 4.0x speed vs 3.0x).
  - Reduce base run times significantly: Map 1 (15s→10s), Map 2 (30s→16s), Map 3 (60s→26s), Map 4 (120s→42s).
  - Smooth progression curve using Fibonacci-inspired multipliers (1.6x-1.625x between maps vs previous 2x jumps).
  - Early game runners feel 1.5x-2.9x faster at base level, addressing "too slow" feedback on higher maps.
- Add subtle visual flash to Ascend HUD multipliers when values increase:
  - Single-cycle flash (200ms): lighter color → restore on next HUD update.
  - Each multiplier has its own color pair (e.g., purple → light purple, blue → light blue).
  - Synchronized with HUD update cycle for instant, consistent flash.
  - Effect coalescing prevents spam from rapid robot completions.
  - No effects on coin count (multipliers only).
  - Fix: Process effects even when values unchanged, ensuring color restoration.
- Add a map admin glider toggle to grant the Glider run item per map.
- Reduce manual multiplier increment from +1.0 to +0.1 per completion for better progression balance.
- Add coins-per-run display HUD next to total coins showing theoretical earnings per run.
- Redesign Prestige HUD to focus on Summit stats only, removing Ascension display and adding explanatory hint.
- Increase Ascend HUD top bar background opacity from 0.35 to 0.60 for better multiplier visibility.
- Add star evolution system for Ascend runners:
  - When a runner reaches max level (20), players can evolve it to gain a star and reset level to 0.
  - Each star doubles the multiplier increment per completion (0.01 -> 0.02 -> 0.04 -> 0.08 -> 0.16 -> 0.32).
  - Maximum 5 stars per runner.
  - Runner appearance alternates between green (Kweebec_Sapling) and orange (Kweebec_Sapling_Orange) per star level.
  - Level display now shows stars before the level (e.g., "★★★ Lv.5").
  - Button changes to "Evolve" when level 20 is reached and stars are below max.
  - Evolution is free and resets speed level to 0 while increasing stars.
- Increase max runner speed level from 10 to 20 for each map, adding 10 more progress bar segments.
- Fix AscendMapSelectPage UI selector error by increasing initial refresh delay and adding empty map list guard.
- Sync HUD multiplier colors with map selection colors (violet → blue → cyan → amber → red).
- Redesigned Ascend map selection UI with modern indie game style:
  - Expanded menu container to 620x620px with "A S C E N D" header.
  - New card layout (580x90px) with colored accent bar on left edge.
  - Color palette: violet (#7c3aed) → blue (#3b82f6) → cyan (#06b6d4) → amber (#f59e0b) → red (#ef4444).
  - 20-segment progress bar showing runner speed level (Lv.0 to MAX).
  - Integrated button zone with accent bar on top, showing level, speed, action, and price.
  - Runner level moved from progress bar area into the button zone for cleaner layout.
- Refactor HyvexaPlugin to extract manager classes: LeaderboardHologramManager, CollisionManager, InventorySyncManager, WorldMapManager, ChatFormatter.
- Make DatabaseManager initialization thread-safe with synchronized block and volatile fields.
- Make RobotState thread-safe using AtomicInteger and AtomicLong for concurrent field access.
- Fix ProgressStore total XP cache race condition using AtomicLong.compareAndSet.
- Add stack traces to all exception logging in HyvexaPlugin for better debugging.
- Add DatabaseRetry utility for automatic retry of database operations with exponential backoff.
- Extract CommandUtils to hyvexa-core for shared command argument parsing.
- Extract MapUnlockHelper for consistent map unlock logic in Ascend UI.
- Add method caching to HylogramsBridge for better reflection performance.
- Create ParkourTimingConstants with documented timing and interval values.
- Improve population history accuracy by sampling the live Universe count and bucket entries for clearer visualization.
- Replace the population history list with a horizontal scrolling bar chart.
- Restore HUD and duel tick intervals to 100ms to reduce client update load.
- Hide the compass HUD once on player ready instead of every HUD tick.
- Replace Ascend pending-coin rewards with per-map multiplier digits that pay out the digit product on completion, and refresh the HUD/map UI to match.
- Add three Ascend dev items (Cindercloth/Stormsilk/Cotton) that are granted by default and send a message on right-click.
- Restore Ascend dev items and the server selector on player ready and when entering the Ascend world.
- Wire the Cindercloth Ascend dev item to open the /ascend map selector.
- Rename the Cindercloth dev item to "Open Ascend Menu" with a descriptive tooltip.
- Add Ascend rebirth tracking with a HUD hint at 1000+ coins and /ascend rebirth to convert coins into rebirth multiplier.
- Show a dedicated rebirth HUD panel (black background) when players reach 1000+ coins.
- Expand the rebirth HUD to show "REBIRTH", current->next multiplier, and a large rebirth command hint.
- Move Ascend coin display to a large centered banner under the top multiplier bar.
- Add an /as admin landing page with Maps and Admin Panel options, plus a coins admin page to add/remove your Ascend coins.
- Scale up the Ascend top banner HUD bar for improved readability.
- Add an Ascend top banner HUD bar with colored multiplier slots and separators.
- Hide the default compass HUD component across Hub, Parkour, and Ascend.
- Add Ascend hologram support for map info display in-world.
- Expand Ascend MVP with map price/order configuration, pending-coin collection, unlock gating, and HUD coin/pending display.
- Refocused ASCEND_MODULE_SUMMARY.md to only cover the Ascend module contents.
- Update the leaderboard hologram to show position, name, and maps completed.
- Add /pk admin hologram refresh to manually update the leaderboard hologram.
- Expose Hylograms API wrappers (builder, hologram, interactions) through HylogramsBridge.
- Align leaderboard hologram columns and clamp long names for consistent spacing.
- Split leaderboard counts into a separate hologram column for improved alignment.
- Keep leaderboard in a single hologram with separators to avoid camera-facing drift.
- Add a Map Admin "Create Holo" button to spawn a top-5 times hologram for the selected map.
- Auto-refresh map leaderboard holograms when a new top-5 time is recorded.
- Refresh map leaderboard holograms after any completion for the map.
- Resolve map leaderboard hologram updates against the hologram world for reliable refreshes.
- Respawn map leaderboard holograms after updates to prevent overlapping lines.
- Added /as holograms to list Hylograms names in Ascend admin commands.
- Added Hylograms dependency to the Parkour Ascend plugin manifest so it can access the API at runtime.
- Documented Hylograms API usage and classloader rules in AGENTS.
- Route Hylograms API access through the Hylograms plugin classloader to avoid runtime class visibility issues.
- Added /pk holograms to list Hylograms names via the mod API.
- Declare Hylograms as a dependency for the Parkour plugin manifest to expose its API at runtime.
- Refresh the run timer HUD every 10ms instead of 100ms.
- Refresh the duel tick loop every 10ms instead of 100ms.
- Preserve active parkour runs across disconnects, keeping timer and checkpoint progress.
- Expire disconnected parkour runs after 30 minutes offline.
- Show checkpoint split time deltas in a temporary HUD overlay after reaching a checkpoint.
- Format checkpoint split chat timings to two decimals instead of millisecond precision.
- Move parkour run detection to an ECS per-tick system instead of the 200ms poll.
- Drive the parkour run timer from per-tick ECS updates to match HUD timing.
- Use CommandBuffer-backed teleports during per-tick run checks to avoid store processing crashes.
- Ensure per-tick run checks pass the ECS command buffer to teleport safely.
- Show checkpoint split times and deltas with millisecond precision while keeping map times at 2 decimals.
- Interpolate checkpoint and finish times within a tick using segment-sphere intersection.
- Always show start/finish ping at run end and warn if the delta exceeds 50ms.
- Document the per-tick ECS run tracking approach and require English documentation in AGENTS.
- Add run elapsed time to checkpoint split diff messages.
- XP is now calculated from completed maps instead of being awarded on completion.
- Removed the XP input from the progress admin purge UI now that XP is recalculated.
- Put mithril swords/daggers at the start of the run hotbar and shift other run items right.
- Added practice mode run items to set per-run checkpoints, ignore map checkpoints, and block finishes while practicing.
- Swapped the practice checkpoint item to use Ingredient_Fire_Essence instead of water essence.
- Save practice checkpoint head rotation and restore it on restart-to-checkpoint.
- Use head rotation when saving map start/leave teleport transforms.
- Clear inventory on Hub ready so only the Server Selector is present after reconnects.
- Extended the Hub HUD background to fully enclose the store line.
- Added a Hub HUD hint about right-clicking the Server Selector item to choose a mode.
- Added IP and Support Hyvexa promo section to the Hub HUD.
- Prevent Parkour/Ascend HUD updates outside their worlds so Hub/Ascend/Parkour HUDs stay in sync when switching modes.
- Ensure Hub HUD reattaches on player ready when in the Hub world, covering mode switches and relogs.
- Reattach Parkour HUD on player ready when returning to Parkour mode after a relog.
- Continuously enforce Hub HUD while in the Hub world to override lingering Parkour HUDs after mode switches.
- Force players back to Hub on reconnect by resetting mode to HUB on disconnect and on ready.
- Add Ascend data-layer constants, models, stores, and schema setup.
- Initialize Ascend plugin bootstrap with database setup and store loading.
- Add /ascend command with collect and stats handling.
- Add AscendRunTracker for manual map completion tracking.
- Add Ascend robot state tracking and manager skeleton.
- Route hub menu Ascend button to the Ascend world instead of the coming-soon message.
- Clear Ascend inventories on mode enter, then give the hub Server Selector in the last hotbar slot.
- Clear inventory and give the hub Server Selector in the last slot when routing into Ascend.
- Gate Ascend commands to Ascend mode and add the matching /menu prompt message.
- Add ASCEND_CURRENT.md status document for current Ascend implementation.
- Wire Ascend plugin integration (run tracker tick, robot manager start/stop, shutdown saves).
- Add Ascend map admin commands under /as admin and player map select UI for manual runs.
- Add Ascend admin map UI at /as admin for editing map start/finish/reward/waypoints.
- Enlarge Ascend admin UI buttons and fields to prevent label cropping.
- Allow updating Ascend maps via the admin UI after selecting a map.
- Add Ascend Run HUD copy with coin/map progress display and show it in Ascend mode.
- Add Ascend Run HUD UI copies in Pages/Custom paths to fix HUD element lookup.
- Align Ascend HUD layout with Parkour HUD and override static labels for Ascend.
- Delay Ascend HUD updates briefly after attach to avoid missing UI elements.
- Remove the unused Ascend hidden HUD; keep a single Ascend HUD in all modes.
- Simplify Ascend HUD to only show the HYVEXA ASCEND label.
- Add a simple Hub HUD label and stop hiding HUDs on mode transitions.
- Attach the Hub HUD only when entering HUB mode to avoid overriding Ascend HUD.
- Attach the Hub HUD directly during hub routing so it always overrides previous mode HUDs.
- Rename the Depths module and all mode references to Parkour Ascend across code, docs, and build outputs.
- Improve hub routing world resolution with case-insensitive lookup and on-demand load fallback to avoid /menu landing in the wrong world.
- Switch hub routing world names to "Hub", "Parkour", and "Ascend" to match capitalized world folders.
- Disable Parkour Ascend routing from the hub menu and show a coming-soon message instead.
- Add hover feedback on the Discord and Store banners in the hub menu.
- Wire Discord/Store banner clicks to the same link messages as /discord and /store.
- Add a Discord banner graphic to the hub menu UI.
- Add a store banner graphic to the hub menu UI.
- Route players to the Parkour Ascend world when selecting it from the hub menu.
- Add the Hyvexa hub plugin with mode state persistence, /menu routing, and a basic hub menu UI for Parkour/Parkour Ascend selection.
- Give hub players a Server Selector hotbar item backed by a custom icon asset.
- Open the hub menu when right-clicking the hub Server Selector item.
- Swap the hub Server Selector item model to use the custom golem blockymodel.
- Add the hub Server Selector item to the parkour hotbar in slot 9.
- Route players to the hub when they use the Server Selector item outside the hub.
- Rename the hub command to /menu to avoid clashing with the built-in /hub command.
- Shade core into hub/ascend jars, add a staging task to copy plugin jars to run/mods, add a Parkour Ascend plugin stub manifest/entrypoint, and rename the parkour jar to HyvexaParkour-<version>.jar.
- Clear player inventories when routing into the hub so players start with no items until they choose a mode via /menu.
- Gate parkour commands and HUD updates to PARKOUR mode so hub players can’t use parkour commands or see the parkour HUD.
- Add shared ModeGate/ModeMessages helpers in core to centralize mode checks and messaging across modules.
- Resolve parkour mode gating without deprecated Player.getUuid() calls in commands.
- Convert the plugin to a multi-module Gradle layout with core, parkour, parkour-ascend, and hub modules.
- Update ARCHITECTURE.md and DATABASE.md for the multi-module layout and shared database.
- Document ARCHITECTURE.md and DATABASE.md references in docs/codex/AGENTS.md.
- Revise Hyvexa: Parkour Ascend integration plan to use a multi-module architecture from day one.
- Clarify hub routing authority, world-thread rules, and shared MySQL continuity in the Parkour Ascend plan.
- Tighten threading rules, add routing failsafes, and specify UUID-backed shared MySQL identity for split-server.
- Assign hub routing to a dedicated hyvexa-hub module and slim PlayerModeState plus Parkour Ascend-only economy in the plan.
- Add integration approach documentation for the Hyvexa: Parkour Ascend mode.
- Update mode naming in planning docs to Hyvexa: Parkour and Hyvexa: Parkour Ascend.
- Remove legacy parkour compatibility shims from the old io.parkour package.
- Add a code review guide with checklists, severity labels, and hotspot callouts.
- Add per-query DB timeouts and validate countRows table names for safer persistence.
- Warn players when completion saves fail and guard checkpoint access against null/empty lists.
- Fix DatabaseManager singleton initialization for consistent pool usage.
- Extract HUD, announcements, perks, playtime, and cleanup managers to slim down HyvexaPlugin.
- Show checkpoint PB deltas and append a color-coded finish delta inline with the completion message.
- Remove the redundant "Finish line reached." message on completion.
- Replace "Map loaded." with the consistent "Run started." start message.
- Replace "Left map." with the consistent "Run ended." leave message.
- Add the Parkour prefix and include map names in run start/end messages.
- Widen the "No reset item" toggle button to prevent text cropping.
- Lower the category completion text so it aligns better with category names.
- Fix category completion alignment by switching the category entry layout to Top.
- Remove the Parkour prefix from PB/world-record completion broadcasts.
- Stop sending the custom "[-] Name" leave message and rely on the default leave broadcast.
- Nudge the category completion text slightly higher in the category list.
- Lower the duel unlock requirement from 40 completed maps to 5.
- Tweak PB/WR broadcast styling by replacing grey connector text with the info color.
- Keep the rank brackets in PB/WR broadcasts white.
- Unified system message styling with a clear color palette and added `/messagetest` to preview them in-game.
- Added `/rules` command explaining that cuts/strategies are allowed but cheating and bug abuse are not.
- Gate duel queue behind 5 completed maps, show an unlock message, and display a locked state in the duel UI.
- Show per-category map completion counts (X/Y Completed) on the level category selector.
- Added `{store}` global message placeholder that hyperlinks to the Hyvexa store.
- Prevent non-OP players from interacting with Launchpad blocks.
- Removed the Aura music option from player settings and fall back legacy Aura selections to the Zelda OST.
- Added 1v1 duel mode with matchmaking queue, duel stats, and per-map duel enable toggle.
- Removed /dbmigrate command and JSON migration support now that all data is DB-backed.
- Added /1v1 admin force <player> to start a duel for local testing.
- Added a duel menu longsword item that opens a duel UI with a Queue button.
- Added a duel menu Active Matches button for OPs.
- Added checkpoint and finish sounds for duel runs.
- Added a duel leaderboard UI and a Duel Menu leaderboard button.
- Updated duel leaderboard entries to show W/L counts.
- Updated duel finish messages to show winner time and opponent time for the loser.
- Added a gg prompt with opponent name to duel win/lose finish messages.
- Renamed the /1v1 command to /duel (including admin subcommands).
- Moved the Duel menu item to hotbar slot 2 and shifted base menu items up one slot.
- Prevented VIP/Founder speed boosts from being reset during duels.
- Hide all other players during duels (only the opponent remains visible), then restore visibility after the match.
- Reset VIP/Founder speed boosts to normal at duel start and restore after the match.
- Added a duel menu toggle to show or hide your opponent during a duel (persists across reconnects).
- Added duel category toggles (Easy/Medium/Hard/Insane) and matchmaking now requires shared categories.
- Queue join messages now show the selected duel categories.
- Extended the Duel menu UI height to fit the added toggles and buttons.
- Default duel categories are now Easy/Medium ON and Hard/Insane OFF.
- Widened the duel category ON/OFF buttons so the OFF label is no longer cropped.
- Re-aligned the duel category toggles so the right edges line up cleanly.
- Add checkpoint split times storage for personal best runs.
- Reapply a player's selected music track on reconnect so the actual track matches the saved label.
- Remove the "Run reset." chat message when players restart a run.
- Show [ADMIN] nameplates for OP players instead of their rank.
- Refresh cached rank on completion so run HUD shows new ranks immediately after a rank-up.
- Ensure reset-to-checkpoint and fall respawns return players to their latest reached checkpoint.
- Use the most recently touched checkpoint for respawn even if it is earlier than a previously reached checkpoint.
- Added a player settings toggle to disable the "Reset current map" run item.
- Clear player inventories when using reset or reset-to-checkpoint run items before re-issuing run items.
- Clear VIP speed boosts when players touch start triggers to prevent momentum carryover into runs.
- Show personal best time and leaderboard placement on map leaderboard selection entries after completion.
- Added a map admin free-fall toggle to disable fall respawn timing per map while keeping void cutoff respawns.
- Added a map admin toggle to enable Mithril daggers as a run item during map creation/updates.
- Show tied map leaderboard times with shared ranks (e.g., #1 #1 #3).
- Rank map leaderboards by displayed time precision to avoid hidden millisecond tie breaks.
- Added a Player Settings music label to show the currently playing track.
- Added a Player Settings music button to restart the default Zelda OST.
- Added a Player Settings button to switch music to the Celeste OST.
- Preserve the Player Settings music label per player when reopening the page.
- Sync the run HUD music line with the player's selected track.
- Disabled player damage from all sources (global god mode).
- Widen the admin player action buttons so labels are fully visible.
- Added default/no-music buttons in Player Settings that reset to the Hytale music mix.
- Added a dedicated Player Settings music page with all music controls.
- Set the "No Music" button to return players to the Zelda OST.
- Updated music button targets to use AmbFX_Void for silence and Mus_Forgotten_Temple for default music.
- Added average playtime to the playtime admin page.
- Added an Aura OST button to the music settings page.
- Enlarged the music settings page and button widths to prevent label cropping.
- Removed the developer item note from the music page label.
- Renamed the Aura music button label to drop the OST suffix.
- Added per-player toggles for checkpoint and victory SFX on the music page.
- Added a /pk admin Players page with search, pagination, and per-player map stats detail view.
- Added admin player actions for teleporting and killing from the player stats page with confirmation prompts.
- Added admin player fly toggles to grant or revoke flight without changing game mode.
- Added an admin player inventory reset button to restore the base menu items.
- Added per-player progress clearing actions, including per-map selection in the admin player page.
- Expand /dbmigrate to import global messages, player counts, and missing settings/progress fields from JSON.
- Make /dbmigrate read JSON only (including Maps.json) without falling back to in-memory data.
- Abort /dbmigrate when any required JSON file is missing.
- Remove the unused title system and related database references.
- Add database schema documentation for current tables.
- Add a Clear button to the population history admin page to wipe samples.
- Update population history sampling interval to 10 minutes.
- Add /dbclear to wipe all parkour data from the database.
- Align persistence and settings documentation with the current MySQL-backed implementation.
- Add a smoke test checklist doc for quick manual verification after changes.
- Migrate parkour persistence to MySQL with in-memory caching and HikariCP pooling.
- Restore checkpoint sound playback when players touch checkpoints.
- Make restart-to-checkpoint reset the run when no checkpoints have been reached.
- Fix mithril sword map toggle not applying when starting a run from map selection or start triggers.
- Extend the player progress admin UI height to fit the added content.
- Show map difficulty alongside map names in selection and leaderboard pages when non-zero.
- Sort map lists by difficulty (non-zero first) and then by name on /pk and /pk leaderboard map pages.
- Added rank-prefixed player nameplates above players.
- Guard run HUD hide/show against missing packet handlers to avoid crashes.
- Replace clearing the custom HUD with a blank HUD overlay to avoid client crashes on hide.
- Added Hide HUD/Show HUD buttons in player settings to toggle the run HUD.
- Broadcast a global VexaGod announcement when a player reaches the final completion rank.
- Styled the VexaGod announcement with rainbow rank text and bolded GG callout.
- Split the VexaGod announcement into a main line plus a separate GG prompt.
- Added a bold GG prompt after world record completion broadcasts.
- Render the next-rank XP suffix in white on the stats rank line.
- Added stats rank display to include XP needed for the next completion rank.
- Guard run tracking until PlayerReady to avoid teleport mismatches during login.
- Teleport players back to spawn or map start when they hit the configured void cutoff Y.
- Added the Discord link to the run HUD info panel.
- Matched the Discord HUD line color to the server label.
- Removed the README ignore note from AGENTS instructions.
- Ignore fall respawn timing while climbing or grounded to prevent ladder descents from triggering respawns.
- Broadcast a global chat message when a player finishes a map.
- Colorize map categories in completion broadcasts for Easy/Medium/Hard/Insane.
- Updated the run HUD server address to play.hyvexa.com.
- Added a run-start hotbar item to restart to the last checkpoint once one is reached.
- Swapped the run hotbar order so restart-to-checkpoint sits before leave.
- Added per-map order field in /pkadmin for admin-controlled list ordering.
- Sort map select and leaderboard map lists by the admin order field.
- Order categories in /pk and /pk leaderboard by the lowest map order in each category.
- Added /pkadminitem to give the Media_RemoteControl admin item.
- Swapped parkour menu/run items to custom ingredient/seasonal item ids while keeping interactions.
- Overrode item names/interactions for the new menu/run items so right-click actions work.
- Restored full item definitions for the new menu/run items so they render correctly.
- Set parkour menu/run item rarity to Developer.
- Stop awarding XP for repeat completions of the same map.
- Hide the XP earned message when no XP is awarded.
- Show a one-time welcome UI per player explaining the parkour hotbar items.
- Updated the welcome UI hint to point to /pkitem.
- Adjusted the welcome UI size to better fit its content.
- Added an intro sentence to the welcome UI copy.
- Updated the welcome UI intro to a general Hyvexa jump server greeting.
- Added a "During a map:" label in the welcome UI list.
- Show [Admin] in red for OP chat messages instead of rank.
- Harden chat formatting against null sender names or content.
- Removed temporary/test UI assets and example recipe files.
- Removed unused example UI and test block assets.
- Removed the parkour sound test command.
- Renamed Hyzone branding, packages, and plugin entrypoint to Hyvexa across code, configs, UI, and docs.
- Give parkour menu items on player ready so joiners spawn with the base items without /pkitem.
- Skip replacing inventories with parkour items for OP players.
- Block non-OP players from breaking blocks.
- Hardened progress/map parsing, map ID validation, and coordinate/XP bounds for launch safety.
- Removed the run HUD overlay dim so the game view stays at full brightness.
- Ensure OP players still receive reset/leave items on map start while clearing only their hotbar.
- Ensure OP players get the base menu items on map leave while clearing only their hotbar.
- Return players to spawn and end the run if they fall longer than the configured timeout.
- Updated the HUD server address to include port 5500.
- Added a settings-driven category order for the /pk category list.
- Added chat formatting to display rank before player names.
- Colored chat rank tags and removed angle brackets.
- Reworked rank display to use completion percent across Easy/Medium/Hard/Insane map totals.
- Show rank thresholds and total possible XP in /pkadmin settings.
- Added a stamina stat override that continuously refills stamina for all players.
- Removed automatic spawn teleports on player join.
- Colored rank thresholds in /pkadmin settings.
- Colored the HUD rank label to match the player’s rank.
- Updated completion ranks to start at Bronze and add Master at 100%.
- Apply fall-to-spawn only when not in a run; falling during a run respawns at checkpoints again.
- Removed the idle fall-to-spawn chat message.
- Raised the vertical tolerance for checkpoint and finish line detection.
- Switched teleport-to-spawn to use the world spawn provider instead of fixed coords.
- Skip idle fall-to-spawn for OP players while keeping run fall behavior.
- Added a /pkadmin settings toggle for idle fall respawn on OP players.
- Reset the run timer when a player falls before reaching the first checkpoint.
- Added /cp checkpoint command (set, teleport, clear) stored in memory only.
- Added positional /cp set and /cp clear support alongside --action flags.
- Allow extra arguments so positional /cp set/clear parse without errors.
- Added /parkourui command with a simple example custom UI page.
- Added JSON-backed course/race storage plus setup commands for parkour data.
- Allow parkour course/race commands to accept subcommands without argument count errors.
- Added admin UI pages to manage courses and races via in-game menus.
- Removed race management in favor of course-only flow aligned with server design.
- Added player-facing course selection UI with teleport to start.
- Renamed player/admin commands to /pk and /pkadmin.
- Added course deletion button in the admin UI.
- Added active course tracking to announce checkpoint and finish touches.
- Added dead-zone respawn: if player falls below Y=300, teleport to last checkpoint or start.
- Added course completion handling with spawn teleport and persisted best times.
- Added course categories and category-first /pk flow with back navigation.
- Added category editing for selected courses in /pkadmin.
- Added /pk leaderboard to show completion counts per player.
- Added leaderboard UI for /pk leaderboard.
- Added leaderboard navigation for global and per-course best times.
- Added a right-click menu item (and /pkitem command) to open /pk via interaction.
- Added leaderboard item and updated /pkitem to give both items.
- Prevented dropping parkour admin items by filtering drop actions in inventory.
- Disabled dropping items globally via inventory drop filters.
- Cancelled DropItemEvent player requests to block all item drops.
- Allowed OP players to drop items while blocking others.
- Clear inventory on course start/leave/finish and swap in reset/leave or menu/leaderboard items.
- Added a non-blocking custom HUD timer that shows run time/status.
- Hide the run HUD by default and show it only during active runs.
- Sync parkour run/menu inventory on player connect based on active course state.
- Teleport players to spawn on connect when no active run is active.
- Added basic player progression with XP, levels, achievements, and title unlocks on completion.
- Added `/pk stats` to show level, XP, achievements, and titles.
- Added a `/pkadmin` page to view/reset player progression by UUID.
- Updated the progress admin page to list tracked players instead of manual UUID entry.
- Store and display last known player names in the progress admin list and summary.
- Applied code review cleanup: lock safety, shared UI button data, constants/utils, settings config, and validation/name fallbacks.
- Restructured the plugin into the Hyvexa package layout with renamed parkour modules and shared utilities.
- Added legacy progress admin shims to prevent missing-class errors after the package move.
- Added legacy parkour admin shims to avoid world-thread crashes when older classes are still cached.
- Restricted /pkadmin to OP players only.
- Replaced dead-zone respawns with a fall timer and added a /pkadmin setting for fall respawn seconds.
- Added a persistent "Hello world" HUD element on the run HUD.
- Reworked the run HUD to show player info, XP, date, and server IP on the right side.
- Added course completion count to the run HUD info panel.
- Applied color styling for EXP/Maps values, date, and server IP on the run HUD.
- Replaced the HUD player line with a centered PARKOUR title.
- Added test UI pages and commands for TestPage, Tutorial3Page, and InfoPanel.
- Renamed parkour courses to maps across data, commands, and UI.
- Added per-map first-completion XP rewards editable in /pkadmin.
- Show first-completion XP rewards in the /pk map selection list for uncompleted maps.
- Added a /pksound test command to play a sound event by id.
- Added /pksound list to show loaded sound event ids.
- Play the parkour victory sound when a player finishes a map.
- Added a test ambience override to play custom music in Zone1 daytime.
- Added global music fallback overrides for custom server music.
- Added /pkmusic debug to list loaded ambience music assets and tracks.
- Updated /pk map selection to show first-completion XP exactly as configured per map.
- Moved first-completion XP text onto the map name line in /pk selection entries.
- Removed the extra reward line from /pk map select entries to avoid blank spacing.
- Removed the unused map reward selector write to prevent UI selector errors.
- Reduced /pk map select entry height to remove extra blank space under status text.
- Reworked progression to show rank tiers (Bronze→Grandmaster) with editable XP thresholds and rank-based displays.
- Removed base completion XP so rewards only apply on first completion using map-configured values.
- Added a /pk stats UI page to show player progression details in a custom UI.
- Removed achievements and active title tracking from parkour progression displays.
- Added a My Stats stick item that opens /pk stats.
- Added Close buttons for UI pages without back navigation.
- Removed titles display from the /pk stats UI.
- Fixed Close buttons for /pk and /pk leaderboard root pages.
- Restored the persistent run HUD on reconnect by reattaching the custom HUD each time.
- Fixed run HUD info not updating by avoiding readiness timer resets each tick.
- Recreate the run HUD on player connect to keep it visible after reconnects.
- Added per-map start/leave trigger blocks to auto-join or leave runs with /pkadmin controls.
- Added a leave teleport coord to /pkadmin that triggers when touching the leave block.
- Wired the leave stick to use the map leave teleport when configured.
- Reworked /pkadmin map buttons into two columns with shorter labels to free list space.
- Forced parkour menu/run items into hotbar slots 0-2 to bypass pickup preference.
- Moved the run timer to the top-center of the screen while running.
- Wrapped the run HUD root so the timer label can sit at top-center without UI load errors.
- Fixed run HUD timer alignment property to avoid UI load failures.
- Adjusted run timer size and position for top-center display.
- Updated run timer text to show the map name with elapsed time.
- Replaced the HUD date line with a static music label.
- Auto-close the first-join welcome UI after a short delay to avoid blocking chat.
- Restored rank-prefixed chat formatting without the admin override.
- Added rank-prefixed join/leave server messages.
- Suppressed the default join broadcast so only the custom join message appears.
- Added a /pkadmin global announcement field that displays a soft top-center HUD message for 10 seconds.
- Ensured the announcement sender also sees the broadcast banner.
- Calculated My Stats XP from completed map totals instead of stored EXP values.
- Moved the announcement banner lower and styled it as a larger boxed HUD element.
- Removed the announcement frame box and increased announcement text size.
- Require touching all checkpoints before completing a map and warn when missing.
- Added a short cooldown between missing-checkpoint warnings at the finish line.
- Broadcast admin announcements to chat in red as "ADMIN MESSAGE: <message>".
- Removed an invalid leave-message event hook that prevented builds.
- Include leaderboard position in completion broadcast messages.
- Highlight leaderboard position and add WR wording for new first-place runs.
- Color the /pk stats rank label and show XP progress against total possible XP.
- Added playtime tracking and a /pkadmin Playtime page listing total playtime per player.
- Fixed playtime entry UI styling to avoid CustomUI load errors.
- Removed UUIDs from the playtime list display.
- Added periodic playtime snapshots to ensure playtime shows even after short sessions.
- Removed the custom leave broadcast while keeping the custom join message.
- Changed the admin chat tag color to pink.
- Reworked the stats candy cane item to a non-consumable definition to prevent unintended movement effects.
- Removed the custom stamina override to restore default sprint behavior.
- Removed the custom gameplay config override to fix asset validation errors on boot.
- Removed an invalid sound set reference from the stats item to fix asset validation.
- Restored the infinite stamina override.
- Re-enabled player collision removal on connect to fully disable player-player collision.
- Removed player collision after connect/ready/world events on the world thread to ensure it sticks.
- Fixed the collision removal hook to handle PlayerReadyEvent references correctly.
- Added a periodic collision cleanup task and removed the invalid AddPlayerToWorldEvent hook.
- Only broadcast map completion globally when the run is a new personal best.
- Changed the admin chat tag color to red.
- Added a /pkadmin population history view with sampled online player counts and a simple chart.
- Track online player counts via connect/disconnect events to keep population samples accurate.
- Show only the numeric player count in the population history rows (no bar characters).
- Restore RunTracker telemetry helpers used by HUD and teleport debug.
- Restore RunTracker player cleanup API used on disconnect.
- Restore RunTracker teleport stats drain API used by debug logging.
- Delay run timer start until the player moves off the start position after map start/reset.
- Added Tebex-friendly /pkrank command and VIP/Founder flags on players for rank purchases.
- Allowed /pkrank to run from console while keeping OP-only for in-game use.
- Added VIP/Founder chat tags and nameplate suffixes based on database flags.
- Colored VIP (purple) and Founder (orange) chat tags.
- Set VIP/Founder chat tag parentheses to white and add spacing after rank.
- Added VIP/Founder speed multiplier buttons (x1/x2/x4) in player settings, auto-reset when entering a map.
- Tweaked VIP speed button widths/spacers to prevent cropping.
- Added side padding to VIP speed row so rounded corners show.
- Added playtime and VIP/Founder status fields to the admin player detail page.
- Moved VIP/Founder rank management under /pk admin rank give/remove <player> <vip/founder>.
- Treated Founder as higher than VIP (Founder implies VIP in rank checks and updates).
- Added /pk admin rank broadcast to send a global supporter message and GG prompt.
- Allowed /pk admin rank commands to run from console for Tebex.
- Scheduled rank broadcast messages on world threads for Tebex safety.
- Added playtime admin search and pagination.
- Added /store command for the Hyvexa store link.
- Enlarged Run HUD typography and added a Support Us section.
- Restored Run HUD UI files to satisfy the Pages/Parkour_RunHud.ui lookup.
- Extended the Run HUD background to fit the Support Us section.
- Added centered store.hyvexa.com line under the Support Us bullets.
- Extended the Run HUD background and moved it slightly higher.
- Extended Run HUD background padding so the store line sits inside the box.
- Kept Run HUD loading path as Pages/Parkour_RunHud.ui (resolved under Common/UI/Custom/Pages at runtime).
- Shifted HUD title text left for better alignment.
- Unified /discord and /store link formatting/colors.
- Replaced HUD emojis with ASCII bullets after rendering fallback.
- Added storm icon before the Speed Boost line in the Run HUD.
- Adjusted storm icon texture path to a relative UI path.
- Added star icon before the Exclusive Ranks line in the Run HUD.
- Nudged the store link down for spacing.
- Increased Support/Store section font sizes to match the HUD.
- Increased Support/Store icon sizes and row heights for better alignment.
- Extended Run HUD background bottom padding/height for the footer.
- Added /dbreload to reload Parkour/database.json and display sanitized connection settings, including the config path.
- Added a reusable coin formatter that switches the Ascend HUD coin display to clear scientific notation over 1,000,000,000.
- Replaced the Ascend HUD info box with the Hub HUD layout, using placeholder hint text and removing the product row.
- Added a hover highlight on Ascend map selection entries for clearer focus feedback.
- Added an Ascend map selection robot purchase row with cost display and per-map robot counts.
- Adjusted Ascend map selection entry layout so map title and details render on separate lines.
- Integrated the Ascend robot purchase button into the map selection entry with a dedicated side control.
- Increased Ascend map selection entry text sizes for readability.
- Increased Ascend map selection entry height to prevent text overflow.
- Increased Ascend map selection robot button height for clearer label layout.
- Widened Ascend map selection entries and robot button to prevent text overflow.
- Rebalanced Ascend map entry widths to expand the robot purchase button for a single-line “+1 Robot” label.
- Aligned the Ascend map row buttons, added spacing, and matched robot button styling to the map entry.
- Increased Ascend map selection container size to keep the robot button within bounds.
- Recentered Ascend map selection entries within the expanded map list container.
- Added Ascend robot automation with per-map base time and per-robot time reduction editable in the Ascend map admin UI.
- Added a Reset Progress button on the Ascend Admin Coins page to wipe the clicking player's Ascend progress.
- Removed the redundant Set Reward button from the Ascend map admin page (Update already handles it).
- Updated Ascend map selection status to show robot completions per second on unlocked maps while keeping locked price text.
- Updated robot-per-second display when buying robots to reflect the live timing formula.
- Renamed the Ascend map selector status to Runs/sec to reflect map completion rate.
- Added positional color progression for Ascend map selection cards (red → orange → yellow → green → blue).
- Auto-refreshes Ascend map selector run-rate text so admin timing changes show without reopening.
- Fixed Ascend map selection color frames to avoid missing-texture backgrounds.
- Set Ascend map selection buttons to full-color fills with contrasting text per map position.
- Unified Ascend map selection card text color to black for all positions.
- Added hover/pressed tinting for Ascend map selection cards while preserving base colors.
- Added explicit default/hover/pressed styles to Ascend map selector buttons to prevent null UI style references.
- Robot completions now add +0.01 to the map's color multiplier in the Ascend top banner.
- Added a rebirth multiplier slot to the Ascend top banner and included it in multiplier product calculations.
- Styled the rebirth multiplier slot to match the other top-bar multipliers.
- Matched the rebirth multiplier text color to the top banner separators.
- Guarded Ascend map selector auto-refresh to avoid updates after close or when map counts change.
- Updated the Hub Game Selector item to display the Kweebec plush model when held.
- Matched the Game Selector held animation/sound to Deco_Kweebec_Plush for consistent rendering.
- Added a double right-click confirmation before leaving a map via the leave item.
- Implemented enhanced Ascend progression system with three prestige tiers:
  - **Summit System (Tier 2)**: Converts coins into permanent category upgrades (Coin Flow, Runner Speed, Manual Mastery). Resets coins and elevation.
  - **Ascension System (Tier 3)**: At 1 trillion coins, converts progress into skill tree points. Resets everything including Summit levels (with optional partial persistence via skill).
  - **Skill Tree**: 18 unlockable skills across 5 paths (Coin, Speed, Manual, Hybrid, Ultimate) with prerequisites and path requirements.
  - **Achievement System**: 12 achievements tracking milestones, runners, and prestige with unlockable titles.
- Added new commands: `/ascend summit <category>`, `/ascend ascension`, `/ascend skills`, `/ascend achievements`, `/ascend title`.
- Added prestige HUD panel showing Summit levels and Ascension count.
- Summit bonuses now apply to coin earnings (Coin Flow), runner speed (Runner Speed), and manual run rewards (Manual Mastery).
- Skill tree bonuses include: starting coins, base reward bonus, reduced elevation/summit costs, auto-elevation, runner speed/level bonuses, instant evolution, manual run chain bonuses, session first-run multiplier, and more.
- Track total coins earned and total manual runs for achievement progress.
- Updated database schema with tables for Summit levels, skill tree unlocks, and achievements.
- Added dedicated UI pages for Elevation, Summit, and Ascension with visual previews:
  - **Elevation UI**: Shows current coins, current multiplier, projected gain, and new multiplier after elevating.
  - **Summit UI**: Displays all 3 categories with current levels, projected gains, and per-category Summit buttons.
  - **Ascension UI**: Progress bar to 1T coins, current ascension count, skill points, reset warnings, and Ascend button.
- Commands `/ascend elevate`, `/ascend summit`, and `/ascend ascension` now open their respective UI pages instead of chat-only interactions.
- Added graphical skill tree UI for the Ascension prestige system:
  - **Visual tree layout**: 18 skill nodes positioned in branching tree pattern with 3 main paths.
  - **Color-coded paths**: COIN (gold), SPEED (blue), MANUAL (purple), HYBRID (teal), ULTIMATE (rose).
  - **Connection lines**: Vertical and horizontal lines connect nodes, colored when prerequisites are unlocked.
  - **Node states**: Locked (gray border), Available (path color border, "AVAILABLE"), Unlocked (path color border, "UNLOCKED").
  - **Click to unlock**: Clicking available nodes spends 1 skill point and unlocks the skill.
  - **Requirement messages**: Clicking locked nodes shows prerequisite requirements in chat.
  - **Tree structure**: T1-T5 tiers per path, HYBRID nodes bridge paths, ULTIMATE at the apex.
  - **Points display**: Header shows available and total skill points.
  - `/ascend skills` now opens the graphical skill tree UI instead of text output.
