$C = "../Common.ui";

$C.@PageOverlay {
  SceneBlur {}

  Group #ChallengeWindow {
    Anchor: (Width: 560, Height: 520);
    LayoutMode: Top;
    Background: #0d1620(0.95);
    OutlineColor: #ffffff(0.06);
    OutlineSize: 1;

    // === HEADER ===
    Group #Header {
      Anchor: (Left: 0, Right: 0, Height: 58);
      LayoutMode: Full;
      Background: #0a1018;

      // Top accent line (red for challenges)
      Group {
        Anchor: (Left: 0, Right: 0, Top: 0, Height: 2);
        Background: #ef4444;
      }

      Label {
        Anchor: (Left: 20, Top: 12, Width: 300, Height: 24);
        Style: (FontSize: 18, TextColor: #f0f4f8, RenderBold: true);
        Text: "Ascension Challenges";
      }

      Label #ApMultiplier {
        Anchor: (Left: 20, Top: 34, Width: 300, Height: 18);
        Style: (FontSize: 13, TextColor: #fbbf24, RenderBold: true);
        Text: "AP Multiplier: x1";
      }

      Group {
        Anchor: (Right: 16, Top: 10, Width: 72, Height: 32);

        TextButton #CloseButton {
          Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
          Text: "Close";
          Style: TextButtonStyle(
            Default: (
              Background: #ffffff(0.06),
              LabelStyle: (FontSize: 13, TextColor: #cfd7dc, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Hovered: (
              Background: #ffffff(0.1),
              LabelStyle: (FontSize: 13, TextColor: #f0f4f8, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Pressed: (
              Background: #ffffff(0.04),
              LabelStyle: (FontSize: 13, TextColor: #cfd7dc, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Sounds: $C.@ButtonSounds,
          );
        }
      }
    }

    // === ACTIVE CHALLENGE BANNER ===
    Group #ActiveBanner {
      Anchor: (Left: 0, Right: 0, Height: 48);
      LayoutMode: Left;
      Background: #1a2530;
      Padding: (Left: 20, Right: 16);
      Visible: false;

      Label #ActiveLabel {
        Anchor: (Top: 0, Bottom: 0, Width: 320);
        Style: (FontSize: 16, TextColor: #fbbf24, RenderBold: true, VerticalAlignment: Center);
        Text: "In Progress: Ascension Sprint - 00:00";
      }

      Group { FlexWeight: 1; }

      Group {
        Anchor: (Width: 90, Height: 32, Top: 8);

        TextButton #QuitButton {
          Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
          Text: "Quit";
          Style: TextButtonStyle(
            Default: (
              Background: #7f1d1d(0.85),
              LabelStyle: (FontSize: 13, TextColor: #fca5a5, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Hovered: (
              Background: #991b1b(0.92),
              LabelStyle: (FontSize: 13, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Pressed: (
              Background: #7f1d1d(0.95),
              LabelStyle: (FontSize: 13, TextColor: #fca5a5, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Sounds: $C.@ButtonSounds,
          );
        }
      }
    }

    // === CONTENT ===
    Group #Content {
      Anchor: (Left: 0, Right: 0);
      FlexWeight: 1;
      LayoutMode: Top;
      Padding: (Left: 20, Right: 20, Top: 12, Bottom: 12);

      Group #ChallengeList {
        Anchor: (Left: 0, Right: 0);
        FlexWeight: 1;
        LayoutMode: TopScrolling;
        ScrollbarStyle: $C.@DefaultScrollbarStyle;

        // === BREAK ASCENSION CARD ===
        Group #BreakCard {
          Anchor: (Left: 0, Right: 0, Bottom: 8, Height: 90);
          LayoutMode: Left;
          Background: #0f1820;
          OutlineColor: #ffffff(0.04);
          OutlineSize: 1;
          Visible: false;

          // Purple accent bar
          Group {
            Anchor: (Width: 6, Top: 0, Bottom: 0);
            Background: #a855f7;
          }

          // Info area
          Group {
            Anchor: (Top: 0, Bottom: 0);
            FlexWeight: 1;
            LayoutMode: Top;
            Padding: (Left: 16, Top: 14, Right: 10, Bottom: 14);

            Label {
              Anchor: (Left: 0, Right: 0, Height: 22);
              Style: (FontSize: 17, TextColor: #e9d5ff, RenderBold: true);
              Text: "Break Ascension";
            }

            Label {
              Anchor: (Left: 0, Right: 0, Height: 20, Top: 4);
              Style: (FontSize: 14, TextColor: #9fb0ba);
              Text: "Suppress auto-ascension at 1Dc";
            }

            Label #BreakStatus {
              Anchor: (Left: 0, Right: 0, Height: 18, Top: 4);
              Style: (FontSize: 13, TextColor: #64748b);
              Text: "OFF";
            }
          }

          // Button area (absolute positioning — button and locked overlay each other)
          Group #BreakButtonArea {
            Anchor: (Width: 120, Top: 0, Bottom: 0);

            // Toggle button (centered: (90-42)/2 = 24)
            Group {
              Anchor: (Left: 6, Right: 14, Top: 24, Height: 42);

              TextButton #BreakButton {
                Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
                Text: "Break";
                Visible: false;
                Style: TextButtonStyle(
                  Default: (
                    Background: #6b21a8(0.85),
                    LabelStyle: (FontSize: 16, TextColor: #e9d5ff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Hovered: (
                    Background: #7e22ce(0.92),
                    LabelStyle: (FontSize: 16, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Pressed: (
                    Background: #6b21a8(0.95),
                    LabelStyle: (FontSize: 16, TextColor: #e9d5ff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Sounds: $C.@ButtonSounds,
                );
              }
            }

            // Locked indicator — 4-segment progress bar (centered: (90-30)/2 = 30)
            Group #BreakLocked {
              Anchor: (Left: 6, Right: 14, Top: 30, Height: 30);
              LayoutMode: Top;
              Visible: false;

              Label {
                Anchor: (Left: 0, Right: 0, Height: 16);
                Style: (FontSize: 12, TextColor: #64748b, RenderBold: true, HorizontalAlignment: Center);
                Text: "Locked";
              }

              // Progress bar segments
              Group {
                Anchor: (Left: 0, Right: 0, Height: 10, Top: 4);
                LayoutMode: Left;

                // Challenge 1 — green
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar1 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #10b981; Visible: false; }
                }
                Group { Anchor: (Width: 3); }

                // Challenge 2 — orange
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar2 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #f59e0b; Visible: false; }
                }
                Group { Anchor: (Width: 3); }

                // Challenge 3 — blue
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar3 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #3b82f6; Visible: false; }
                }
                Group { Anchor: (Width: 3); }

                // Challenge 4 — red
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar4 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #ef4444; Visible: false; }
                }
                Group { Anchor: (Width: 3); }

                // Challenge 5 — violet
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar5 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #8b5cf6; Visible: false; }
                }
                Group { Anchor: (Width: 3); }

                // Challenge 6 — pink
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar6 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #ec4899; Visible: false; }
                }
                Group { Anchor: (Width: 3); }

                // Challenge 7 — orange
                Group {
                  Anchor: (Height: 8, Top: 1);
                  FlexWeight: 1;
                  Background: #1a2530;
                  Group #Bar7 { Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0); Background: #f59e0b; Visible: false; }
                }
              }
            }
          }
        }

        Group #ChallengeCards {
          LayoutMode: Top;
        }
      }
    }

  }
}
