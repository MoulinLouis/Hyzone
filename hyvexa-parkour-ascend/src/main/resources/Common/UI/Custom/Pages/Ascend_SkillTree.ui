$C = "../Common.ui";

@NodeStyle = ButtonStyle(
  Default: (Background: #1a2530),
  Hovered: (Background: #243342),
  Pressed: (Background: #1e2b38),
  Sounds: $C.@ButtonSounds,
);
@LockIcon = "../Textures/lock.png";

$C.@PageOverlay {
  SceneBlur {}

  Group #SkillTreeWindow {
    Anchor: (Width: 700, Height: 900);
    LayoutMode: Top;
    Background: #0d1620(0.95);
    OutlineColor: #ffffff(0.06);
    OutlineSize: 1;

    // === HEADER ===
    Group #Header {
      Anchor: (Left: 0, Right: 0, Height: 52);
      LayoutMode: Full;
      Background: #0a1018;

      // Top accent line
      Group {
        Anchor: (Left: 0, Right: 0, Top: 0, Height: 2);
        Background: #f59e0b;
      }

      Label {
        Anchor: (Left: 20, Top: 16, Width: 200, Height: 24);
        Style: (FontSize: 18, TextColor: #f0f4f8, RenderBold: true);
        Text: "Skill Tree";
      }

      Group {
        Anchor: (Right: 16, Top: 10, Width: 72, Height: 32);

        TextButton #CloseButton {
          Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
          Text: "Close";
          Style: TextButtonStyle(
            Default: (
              Background: #ffffff(0.06),
              LabelStyle: (FontSize: 13, TextColor: #cfd7dc, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Hovered: (
              Background: #ffffff(0.1),
              LabelStyle: (FontSize: 13, TextColor: #f0f4f8, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Pressed: (
              Background: #ffffff(0.04),
              LabelStyle: (FontSize: 13, TextColor: #cfd7dc, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Sounds: $C.@ButtonSounds,
          );
        }
      }
    }

    // === CONTENT ===
    Group #Content {
      Anchor: (Left: 0, Right: 0);
      FlexWeight: 1;
      LayoutMode: Top;
      Padding: (Left: 16, Right: 16, Top: 8, Bottom: 12);

      // --- Points Display ---
      Group #PointsRow {
        Anchor: (Left: 0, Right: 0, Height: 36);
        LayoutMode: Full;
        Background: #ffffff(0.03);
        OutlineColor: #ffffff(0.04);
        OutlineSize: 1;

        Group {
          Anchor: (Left: 0, Top: 0, Bottom: 0, Width: 4);
          Background: #f59e0b;
        }

        Group {
          Anchor: (Left: 16, Top: 0, Bottom: 0, Right: 0);
          LayoutMode: Left;

          Label {
            Anchor: (Width: 100, Top: 0, Bottom: 0);
            Style: (FontSize: 13, TextColor: #9fb0ba, VerticalAlignment: Center);
            Text: "Skill Points:";
          }

          Label #AvailablePoints {
            Anchor: (Width: 30, Top: 0, Bottom: 0);
            Style: (FontSize: 14, TextColor: #4ade80, RenderBold: true, VerticalAlignment: Center);
            Text: "0";
          }

          Label {
            Anchor: (Width: 70, Top: 0, Bottom: 0);
            Style: (FontSize: 13, TextColor: #6b7280, VerticalAlignment: Center);
            Text: "available /";
          }

          Label #TotalPoints {
            Anchor: (Top: 0, Bottom: 0);
            Style: (FontSize: 14, TextColor: #f59e0b, RenderBold: true, VerticalAlignment: Center);
            Text: "0 total";
          }
        }
      }

      // --- Tree Canvas ---
      Group #TreeCanvas {
        Anchor: (Left: 0, Right: 0, Top: 8);
        FlexWeight: 1;

        Group #TreeContent {
          Anchor: (Width: 660, Height: 780);

          // Connectors
          Group #ConnT0T1 { Anchor: (Left: 328, Top: 130, Width: 4, Height: 20); Background: #4b5563; }

          Group #ConnT1Split { Anchor: (Left: 328, Top: 260, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT1H { Anchor: (Left: 160, Top: 268, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT1Left { Anchor: (Left: 160, Top: 272, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT1Right { Anchor: (Left: 500, Top: 272, Width: 4, Height: 8); Background: #4b5563; }

          Group #ConnT2Left { Anchor: (Left: 160, Top: 390, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT2Right { Anchor: (Left: 500, Top: 390, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT2H { Anchor: (Left: 160, Top: 398, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT2Merge { Anchor: (Left: 328, Top: 402, Width: 4, Height: 8); Background: #4b5563; }

          Group #ConnT3Split { Anchor: (Left: 328, Top: 520, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT3H { Anchor: (Left: 160, Top: 528, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT3Left { Anchor: (Left: 160, Top: 532, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT3Right { Anchor: (Left: 500, Top: 532, Width: 4, Height: 8); Background: #4b5563; }

          Group #ConnT4Left { Anchor: (Left: 160, Top: 650, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT4Right { Anchor: (Left: 500, Top: 650, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT4H { Anchor: (Left: 160, Top: 658, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT4Merge { Anchor: (Left: 328, Top: 662, Width: 4, Height: 8); Background: #4b5563; }

          // Tier 0: AUTO_RUNNERS
          Button #NodeAutoRunners {
            Anchor: (Left: 250, Top: 20, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAutoRunners { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAutoRunners {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameAutoRunners { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Auto-Upgrade"; }
              Label #DescAutoRunners { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "+ Momentum"; }
              Label #StatusAutoRunners { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAutoRunners {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 1: AUTO_EVOLUTION
          Button #NodeAutoEvolution {
            Anchor: (Left: 250, Top: 150, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAutoEvolution { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAutoEvolution {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameAutoEvolution { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Auto-Evolution"; }
              Label #DescAutoEvolution { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Auto-evolve at max level"; }
              Label #StatusAutoEvolution { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAutoEvolution {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 2: PERSISTENCE
          Button #NodePersistence {
            Anchor: (Left: 80, Top: 280, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderPersistence { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedPersistence {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NamePersistence { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Persistence"; }
              Label #DescPersistence { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Keep 10% multipliers"; }
              Label #StatusPersistence { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedPersistence {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 2: RUNNER_SPEED
          Button #NodeRunnerSpeed {
            Anchor: (Left: 420, Top: 280, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderRunnerSpeed { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedRunnerSpeed {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameRunnerSpeed { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Runner Speed"; }
              Label #DescRunnerSpeed { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "x1.5 global speed"; }
              Label #StatusRunnerSpeed { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedRunnerSpeed {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 3: OFFLINE_BOOST
          Button #NodeOfflineBoost {
            Anchor: (Left: 250, Top: 410, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderOfflineBoost { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedOfflineBoost {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameOfflineBoost { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Offline Boost"; }
              Label #DescOfflineBoost { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "25% to 40% offline rate"; }
              Label #StatusOfflineBoost { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedOfflineBoost {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 4: SUMMIT_MEMORY
          Button #NodeSummitMemory {
            Anchor: (Left: 80, Top: 540, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderSummitMemory { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedSummitMemory {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameSummitMemory { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Summit Memory"; }
              Label #DescSummitMemory { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Keep 10% Elevation"; }
              Label #StatusSummitMemory { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedSummitMemory {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 4: EVOLUTION_POWER
          Button #NodeEvolutionPower {
            Anchor: (Left: 420, Top: 540, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderEvolutionPower { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedEvolutionPower {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameEvolutionPower { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Evolution Power+"; }
              Label #DescEvolutionPower { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "+1 base evo power"; }
              Label #StatusEvolutionPower { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedEvolutionPower {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 5: ASCENSION_CHALLENGES
          Button #NodeAscensionChallenges {
            Anchor: (Left: 250, Top: 670, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAscensionChallenges { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAscensionChallenges {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label #NameAscensionChallenges { Anchor: (Top: 14); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Challenges"; }
              Label #DescAscensionChallenges { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Coming Soon"; }
              Label #StatusAscensionChallenges { Anchor: (Top: 10); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAscensionChallenges {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Group { Anchor: (Left: 64, Top: 12, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 52); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }
        }
      }
    }
  }
}
