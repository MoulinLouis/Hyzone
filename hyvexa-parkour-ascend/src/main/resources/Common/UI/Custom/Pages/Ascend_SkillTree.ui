$C = "../Common.ui";

@NodeStyle = ButtonStyle(
  Default: (Background: #1a2530),
  Hovered: (Background: #243342),
  Pressed: (Background: #1e2b38),
  Sounds: $C.@ButtonSounds,
);
@LockIcon = "../Textures/lock.png";

$C.@PageOverlay {
  SceneBlur {}

  Group #SkillTreeWindow {
    Anchor: (Width: 700, Height: 780);
    LayoutMode: Full;
    Background: #0d1620(0.95);
    OutlineColor: #ffffff(0.06);
    OutlineSize: 1;

    // === MAIN LAYOUT (flex container for header + content) ===
    Group {
      Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
      LayoutMode: Top;

    // === HEADER ===
    Group #Header {
      Anchor: (Left: 0, Right: 0, Height: 52);
      LayoutMode: Full;
      Background: #0a1018;

      // Top accent line
      Group {
        Anchor: (Left: 0, Right: 0, Top: 0, Height: 2);
        Background: #f59e0b;
      }

      Label {
        Anchor: (Left: 20, Top: 16, Width: 200, Height: 24);
        Style: (FontSize: 18, TextColor: #f0f4f8, RenderBold: true);
        Text: "Ascendancy Tree";
      }

      Group {
        Anchor: (Right: 16, Top: 10, Width: 72, Height: 32);

        TextButton #CloseButton {
          Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
          Text: "Close";
          Style: TextButtonStyle(
            Default: (
              Background: #ffffff(0.06),
              LabelStyle: (FontSize: 13, TextColor: #cfd7dc, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Hovered: (
              Background: #ffffff(0.1),
              LabelStyle: (FontSize: 13, TextColor: #f0f4f8, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Pressed: (
              Background: #ffffff(0.04),
              LabelStyle: (FontSize: 13, TextColor: #cfd7dc, HorizontalAlignment: Center, VerticalAlignment: Center)
            ),
            Sounds: $C.@ButtonSounds,
          );
        }
      }
    }

    // === CONTENT ===
    Group #Content {
      Anchor: (Left: 0, Right: 0);
      FlexWeight: 1;
      LayoutMode: Top;
      Padding: (Left: 16, Right: 16, Top: 8, Bottom: 12);

      // --- Points Display ---
      Group #PointsRow {
        Anchor: (Left: 0, Right: 0, Height: 36);
        LayoutMode: Full;
        Background: #ffffff(0.03);
        OutlineColor: #ffffff(0.04);
        OutlineSize: 1;

        Group {
          Anchor: (Left: 0, Top: 0, Bottom: 0, Width: 4);
          Background: #f59e0b;
        }

        Group {
          Anchor: (Left: 16, Top: 0, Bottom: 0, Right: 0);
          LayoutMode: Left;

          Label {
            Anchor: (Width: 30, Top: 0, Bottom: 0);
            Style: (FontSize: 13, TextColor: #9fb0ba, VerticalAlignment: Center);
            Text: "AP:";
          }

          Label #AvailablePoints {
            Anchor: (Width: 24, Top: 0, Bottom: 0);
            Style: (FontSize: 14, TextColor: #4ade80, RenderBold: true, VerticalAlignment: Center);
            Text: "0";
          }

          Label {
            Anchor: (Width: 20, Top: 0, Bottom: 0);
            Style: (FontSize: 13, TextColor: #4b5563, VerticalAlignment: Center);
            Text: "|";
          }

          Label {
            Anchor: (Width: 95, Top: 0, Bottom: 0);
            Style: (FontSize: 13, TextColor: #9fb0ba, VerticalAlignment: Center);
            Text: "Ascendance:";
          }

          Label #AscendanceValue {
            Anchor: (Top: 0, Bottom: 0);
            Style: (FontSize: 14, TextColor: #c084fc, RenderBold: true, VerticalAlignment: Center);
            Text: "0";
          }
        }
      }

      // --- Tree Canvas (scrollable when detail panel is open) ---
      Group #TreeCanvas {
        Anchor: (Left: 0, Right: 0, Top: 8);
        FlexWeight: 1;
        ContentHeight: 1320;
        ScrollbarStyle: (Size: 6, Spacing: 2, OnlyVisibleWhenHovered: true, Handle: #ffffff(0.15), HoveredHandle: #ffffff(0.25), DraggedHandle: #ffffff(0.3));

        Group #TreeContent {
          Anchor: (Left: 0, Top: 0, Width: 660, Height: 1320);

          // Connectors: T1->T2 straight
          Group #ConnT0T1 { Anchor: (Left: 328, Top: 130, Width: 4, Height: 20); Background: #4b5563; }

          // T2->split to T3 left/right
          Group #ConnT1Split { Anchor: (Left: 328, Top: 260, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT1H { Anchor: (Left: 160, Top: 268, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT1Left { Anchor: (Left: 160, Top: 272, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT1Right { Anchor: (Left: 500, Top: 272, Width: 4, Height: 8); Background: #4b5563; }

          // T3 left/right merge to T4 center
          Group #ConnT2Left { Anchor: (Left: 160, Top: 390, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT2Right { Anchor: (Left: 500, Top: 390, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT2H { Anchor: (Left: 160, Top: 398, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT2Merge { Anchor: (Left: 328, Top: 402, Width: 4, Height: 8); Background: #4b5563; }

          // T4->split to T5 left/right
          Group #ConnT3Split { Anchor: (Left: 328, Top: 520, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT3H { Anchor: (Left: 160, Top: 528, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT3Left { Anchor: (Left: 160, Top: 532, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT3Right { Anchor: (Left: 500, Top: 532, Width: 4, Height: 8); Background: #4b5563; }

          // T5 left/right merge to T6 center
          Group #ConnT4Left { Anchor: (Left: 160, Top: 650, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT4Right { Anchor: (Left: 500, Top: 650, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT4H { Anchor: (Left: 160, Top: 658, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT4Merge { Anchor: (Left: 328, Top: 662, Width: 4, Height: 8); Background: #4b5563; }

          // T6->T7 straight
          Group #ConnT5T6 { Anchor: (Left: 328, Top: 780, Width: 4, Height: 20); Background: #4b5563; }

          // T7->T8 straight
          Group #ConnT6T7 { Anchor: (Left: 328, Top: 910, Width: 4, Height: 20); Background: #4b5563; }

          // T8->split to T9 left/right
          Group #ConnT7Split { Anchor: (Left: 328, Top: 1040, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT7H { Anchor: (Left: 160, Top: 1048, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT7Left { Anchor: (Left: 160, Top: 1052, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT7Right { Anchor: (Left: 500, Top: 1052, Width: 4, Height: 8); Background: #4b5563; }

          // T9 left/right merge to T10 center
          Group #ConnT8Left { Anchor: (Left: 160, Top: 1170, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT8Right { Anchor: (Left: 500, Top: 1170, Width: 4, Height: 8); Background: #4b5563; }
          Group #ConnT8H { Anchor: (Left: 160, Top: 1178, Width: 340, Height: 4); Background: #4b5563; }
          Group #ConnT8Merge { Anchor: (Left: 328, Top: 1182, Width: 4, Height: 8); Background: #4b5563; }

          // Tier 1: AUTO_RUNNERS
          Button #NodeAutoRunners {
            Anchor: (Left: 250, Top: 20, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAutoRunners { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAutoRunners {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "1:1"; }
              Label #NameAutoRunners { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Auto-Upgrade"; }
              Label #DescAutoRunners { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "+ Momentum"; }
              Label #StatusAutoRunners { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAutoRunners {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "1:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 2: AUTO_EVOLUTION
          Button #NodeAutoEvolution {
            Anchor: (Left: 250, Top: 150, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAutoEvolution { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAutoEvolution {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "2:1"; }
              Label #NameAutoEvolution { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Auto-Evolution"; }
              Label #DescAutoEvolution { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Auto-evolve at max level"; }
              Label #StatusAutoEvolution { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAutoEvolution {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "2:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 3: RUNNER_SPEED (left)
          Button #NodeRunnerSpeed {
            Anchor: (Left: 80, Top: 280, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderRunnerSpeed { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedRunnerSpeed {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "3:1"; }
              Label #NameRunnerSpeed { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Runner Speed"; }
              Label #DescRunnerSpeed { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "x1.1 global speed"; }
              Label #StatusRunnerSpeed { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedRunnerSpeed {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "3:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 3: EVOLUTION_POWER (right)
          Button #NodeEvolutionPower {
            Anchor: (Left: 420, Top: 280, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderEvolutionPower { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedEvolutionPower {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "3:2"; }
              Label #NameEvolutionPower { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Evolution Power+"; }
              Label #DescEvolutionPower { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "+1 base evo power"; }
              Label #StatusEvolutionPower { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedEvolutionPower {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "3:2"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 4: RUNNER_SPEED_2 (center)
          Button #NodeRunnerSpeed2 {
            Anchor: (Left: 250, Top: 410, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderRunnerSpeed2 { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedRunnerSpeed2 {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "4:1"; }
              Label #NameRunnerSpeed2 { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Runner Speed II"; }
              Label #DescRunnerSpeed2 { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "x1.2 global speed"; }
              Label #StatusRunnerSpeed2 { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedRunnerSpeed2 {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "4:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 6: ASCENSION_CHALLENGES (center)
          Button #NodeAscensionChallenges {
            Anchor: (Left: 250, Top: 670, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAscensionChallenges { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAscensionChallenges {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "6:1"; }
              Label #NameAscensionChallenges { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Challenges"; }
              Label #DescAscensionChallenges { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: ""; }
              Label #StatusAscensionChallenges { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAscensionChallenges {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "6:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 7: MOMENTUM_SURGE (center)
          Button #NodeMomentumSurge {
            Anchor: (Left: 250, Top: 800, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderMomentumSurge { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedMomentumSurge {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "7:1"; }
              Label #NameMomentumSurge { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Momentum Surge"; }
              Label #DescMomentumSurge { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "x2 -> x3 momentum"; }
              Label #StatusMomentumSurge { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedMomentumSurge {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "7:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 5: AUTO_SUMMIT (left)
          Button #NodeAutoSummit {
            Anchor: (Left: 80, Top: 540, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAutoSummit { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAutoSummit {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "5:1"; }
              Label #NameAutoSummit { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Auto-Summit"; }
              Label #DescAutoSummit { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Auto-summit cycling"; }
              Label #StatusAutoSummit { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAutoSummit {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "5:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 5: AUTO_ELEVATION (right)
          Button #NodeAutoElevation {
            Anchor: (Left: 420, Top: 540, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderAutoElevation { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedAutoElevation {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "5:2"; }
              Label #NameAutoElevation { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Auto-Elevation"; }
              Label #DescAutoElevation { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "Auto-elevate targets"; }
              Label #StatusAutoElevation { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedAutoElevation {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "5:2"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 8: MULTIPLIER_BOOST (center)
          Button #NodeMultiplierBoost {
            Anchor: (Left: 250, Top: 930, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderMultiplierBoost { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedMultiplierBoost {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "8:1"; }
              Label #NameMultiplierBoost { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Multiplier Boost"; }
              Label #DescMultiplierBoost { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "+0.10 base mult gain"; }
              Label #StatusMultiplierBoost { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedMultiplierBoost {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "8:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 9: RUNNER_SPEED_3 (left)
          Button #NodeRunnerSpeed3 {
            Anchor: (Left: 80, Top: 1060, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderRunnerSpeed3 { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedRunnerSpeed3 {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "9:1"; }
              Label #NameRunnerSpeed3 { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Runner Speed III"; }
              Label #DescRunnerSpeed3 { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "x1.3 global speed"; }
              Label #StatusRunnerSpeed3 { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedRunnerSpeed3 {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "9:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 9: EVOLUTION_POWER_2 (right)
          Button #NodeEvolutionPower2 {
            Anchor: (Left: 420, Top: 1060, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderEvolutionPower2 { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedEvolutionPower2 {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "9:2"; }
              Label #NameEvolutionPower2 { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Evolution Power II"; }
              Label #DescEvolutionPower2 { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "+1 base evo power"; }
              Label #StatusEvolutionPower2 { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedEvolutionPower2 {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "9:2"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

          // Tier 10: MOMENTUM_ENDURANCE (center)
          Button #NodeMomentumEndurance {
            Anchor: (Left: 250, Top: 1190, Width: 160, Height: 110);
            Background: #1a2530;
            Style: @NodeStyle;
            LayoutMode: Top;
            Group #BorderMomentumEndurance { Anchor: (Left: 0, Right: 0, Top: 0, Height: 6); Background: #4b5563; }
            Group #RevealedMomentumEndurance {
              Visible: false;
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              LayoutMode: Top;
              Label { Anchor: (Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "10:1"; }
              Label #NameMomentumEndurance { Anchor: (Top: 2); Style: (FontSize: 13, RenderBold: true, TextColor: #f0f4f8, HorizontalAlignment: Center); Text: "Momentum End."; }
              Label #DescMomentumEndurance { Anchor: (Top: 4); Style: (FontSize: 11, TextColor: #6b7280, HorizontalAlignment: Center); Text: "60s -> 90s duration"; }
              Label #StatusMomentumEndurance { Anchor: (Top: 6); Style: (FontSize: 12, RenderBold: true, TextColor: #6b7280, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
            Group #LockedMomentumEndurance {
              Anchor: (Left: 0, Right: 0);
              FlexWeight: 1;
              Label { Anchor: (Left: 0, Right: 0, Top: 4); Style: (FontSize: 9, TextColor: #4b5563, HorizontalAlignment: Center); Text: "10:1"; }
              Group { Anchor: (Left: 64, Top: 18, Width: 32, Height: 32); Background: @LockIcon; }
              Label { Anchor: (Left: 0, Right: 0, Top: 56); Style: (FontSize: 12, RenderBold: true, TextColor: #4b5563, HorizontalAlignment: Center); Text: "LOCKED"; }
            }
          }

        }
      }
    }

    // === NODE DETAIL PANEL (inside flex layout, pushes tree up) ===
    Group #DetailPanel {
      Visible: false;
      Anchor: (Left: 0, Right: 0, Height: 200);
      Background: #0a1018;
      OutlineColor: #ffffff(0.08);
      OutlineSize: 1;

      // Top accent line
      Group {
        Anchor: (Left: 0, Right: 0, Top: 0, Height: 2);
        Background: #f59e0b;
      }

      Group {
        Anchor: (Left: 0, Right: 0, Top: 2, Bottom: 0);
        LayoutMode: Full;

        // Icon square (left side)
        Group #DetailIconArea {
          Anchor: (Left: 0, Top: 0, Bottom: 0, Width: 198);
          Background: #0f1923;

          Label #DetailCoord {
            Anchor: (Left: 8, Top: 6, Width: 40, Height: 18);
            Style: (FontSize: 12, TextColor: #4b5563);
            Text: "";
          }

          Group #DetailIcon {
            Anchor: (Left: 39, Top: 39, Width: 120, Height: 120);
            Background: "../Textures/golem_icon.png";
          }
        }

        // Vertical separator
        Group {
          Anchor: (Left: 198, Top: 8, Bottom: 8, Width: 1);
          Background: #ffffff(0.08);
        }

        // Text content (right side)
        Group {
          Anchor: (Left: 199, Top: 0, Bottom: 0, Right: 0);
          LayoutMode: Top;
          Padding: (Left: 20, Right: 20, Top: 14, Bottom: 14);

          // Title row
          Group {
            Anchor: (Left: 0, Right: 0, Height: 32);
            LayoutMode: Full;

            Label #DetailTitle {
              Anchor: (Left: 0, Top: 0, Bottom: 0, Width: 350);
              Style: (FontSize: 22, RenderBold: true, TextColor: #f0f4f8, VerticalAlignment: Center);
              Text: "";
            }

            // Close detail panel button
            Group {
              Anchor: (Right: 0, Top: 0, Bottom: 0, Width: 60);

              TextButton #DetailCloseBtn {
                Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
                Text: "Close";
                Style: TextButtonStyle(
                  Default: (
                    Background: #ffffff(0.06),
                    LabelStyle: (FontSize: 12, TextColor: #9fb0ba, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Hovered: (
                    Background: #ffffff(0.1),
                    LabelStyle: (FontSize: 12, TextColor: #f0f4f8, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Pressed: (
                    Background: #ffffff(0.04),
                    LabelStyle: (FontSize: 12, TextColor: #9fb0ba, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Sounds: $C.@ButtonSounds,
                );
              }
            }
          }

          // Description
          Label #DetailDesc {
            Anchor: (Left: 0, Right: 0, Top: 10, Height: 50);
            Style: (FontSize: 16, TextColor: #9fb0ba, Wrap: true);
            Text: "";
          }

          // Bottom row: status + unlock button
          Group {
            Anchor: (Left: 0, Right: 0, Top: 10, Height: 36);
            LayoutMode: Full;

            Label #DetailStatus {
              Anchor: (Left: 0, Top: 0, Bottom: 0, Width: 300);
              Style: (FontSize: 12, TextColor: #6b7280, VerticalAlignment: Center);
              Text: "";
            }

            // Active unlock button (enough AP)
            Group #UnlockBtnActive {
              Anchor: (Right: 0, Top: 0, Bottom: 0, Width: 150);

              TextButton #UnlockButton {
                Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
                Text: "1 AP";
                Style: TextButtonStyle(
                  Default: (
                    Background: #f59e0b,
                    LabelStyle: (FontSize: 13, TextColor: #0d1620, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Hovered: (
                    Background: #fbbf24,
                    LabelStyle: (FontSize: 13, TextColor: #0d1620, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Pressed: (
                    Background: #d97706,
                    LabelStyle: (FontSize: 13, TextColor: #0d1620, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)
                  ),
                  Sounds: $C.@ButtonSounds,
                );
              }
            }

            // Dimmed unlock button (not enough AP)
            Group #UnlockBtnDisabled {
              Visible: false;
              Anchor: (Right: 0, Top: 0, Bottom: 0, Width: 150);
              Background: #3b3a2e;

              Label #UnlockBtnDisabledLabel {
                Anchor: (Left: 0, Right: 0, Top: 0, Bottom: 0);
                Style: (FontSize: 13, TextColor: #7a7560, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center);
                Text: "1 AP";
              }
            }
          }
        }
      }
    }
    } // end main flex layout
  }
}
